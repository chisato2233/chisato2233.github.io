{
    "version": "https://jsonfeed.org/version/1",
    "title": "Hexo",
    "description": "",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/computer-science/cpp/cpp20-%E5%8D%8F%E7%A8%8B/",
            "url": "http://example.com/computer-science/cpp/cpp20-%E5%8D%8F%E7%A8%8B/",
            "title": "",
            "date_published": "2023-06-13T03:35:29.140Z",
            "content_html": "<h1 id=\"1-序列查询\"><a class=\"markdownIt-Anchor\" href=\"#1-序列查询\">#</a> 1. 序列查询</h1>\n<h2 id=\"11-题目\"><a class=\"markdownIt-Anchor\" href=\"#11-题目\">#</a> 1.1 题目</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cDovLzExOC4xOTAuMjAuMTYyL3ZpZXcucGFnZT9ncGlkPVQxMzg=\">http://118.190.20.162/view.page?gpid=T138</span></p>\n<h3 id=\"12-解题思路\"><a class=\"markdownIt-Anchor\" href=\"#12-解题思路\">#</a> 1.2 解题思路</h3>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mspace width=\"2em\"/></mrow><annotation encoding=\"application/x-tex\">\\qquad</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0em;vertical-align:0em;\"></span><span class=\"mspace\" style=\"margin-right:2em;\"></span></span></span></span> 对于题目要求的求和操作，不妨去考虑输入的数组 A 对于答案的贡献。</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mspace width=\"2em\"/></mrow><annotation encoding=\"application/x-tex\">\\qquad</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0em;vertical-align:0em;\"></span><span class=\"mspace\" style=\"margin-right:2em;\"></span></span></span></span> 当某一次查询操作正好查询到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>A</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">A_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 之后，在找到比<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>A</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">A_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 更大的数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>A</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding=\"application/x-tex\">A_{i+1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.891661em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span></span></span></span> 之前，所有的查询结果都是 i。一共有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><msub><mi>A</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>−</mo><msub><mi>A</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo><mtext> </mtext></mrow><annotation encoding=\"application/x-tex\">(A_{i+1}-A_i) </annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mord\"> </span></span></span></span>个 i。所以对于序列 A 中的相邻两项，他们对答案的贡献就是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><msub><mi>A</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>−</mo><msub><mi>A</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo><mo>×</mo><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">(A_{i+1}-A_i)\\times i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span> 因此，我们只需要读入 A 的时候计算这样的贡献即可。</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mspace width=\"2em\"/></mrow><annotation encoding=\"application/x-tex\">\\qquad</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0em;vertical-align:0em;\"></span><span class=\"mspace\" style=\"margin-right:2em;\"></span></span></span></span> 需要注意的是题目中的查询范围截至到 N，对于超出<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>A</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">A_n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 但还不到 N 的部分，他们的查询结果，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>N</mi><mo>−</mo><msub><mi>A</mi><mi>n</mi></msub><mo stretchy=\"false\">)</mo><mo>∗</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">(N-A_n)*n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span> 也需要加到答案中去.<br>\n 时空复杂度都是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mspace width=\"2em\"/></mrow><annotation encoding=\"application/x-tex\">\\qquad</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0em;vertical-align:0em;\"></span><span class=\"mspace\" style=\"margin-right:2em;\"></span></span></span></span> 当然，由于遍历 A 数组时每一次操作只需要两个数据，可以用滚动数组将空间复杂度优化为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></p>\n<h3 id=\"13-代码\"><a class=\"markdownIt-Anchor\" href=\"#13-代码\">#</a> 1.3 代码</h3>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cpp\"><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;iostream&gt;</span></span><br><span class=\"hljs-keyword\">using</span> <span class=\"hljs-keyword\">namespace</span> std;<br><span class=\"hljs-keyword\">using</span> ull = <span class=\"hljs-type\">unsigned</span> <span class=\"hljs-type\">long</span> <span class=\"hljs-type\">long</span>;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">slove</span><span class=\"hljs-params\">()</span> </span>&#123;<br>    <span class=\"hljs-type\">int</span> n, N;<br>    ull res = <span class=\"hljs-number\">0</span>;<br>    cin &gt;&gt; n &gt;&gt; N;<br>    <span class=\"hljs-function\">vector&lt;<span class=\"hljs-type\">int</span>&gt; <span class=\"hljs-title\">v</span><span class=\"hljs-params\">(<span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">0</span>)</span></span>;<br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">1</span>; i &lt;= n; i++) &#123;<br>        cin &gt;&gt; v[i &amp; <span class=\"hljs-number\">1</span>];<br>        res += <span class=\"hljs-built_in\">abs</span>(v[<span class=\"hljs-number\">0</span>] - v[<span class=\"hljs-number\">1</span>]) * (i - <span class=\"hljs-number\">1</span>);<br>    &#125;<br>    res += (N - <span class=\"hljs-built_in\">max</span>(v[<span class=\"hljs-number\">0</span>],v[<span class=\"hljs-number\">1</span>])) * n;<br>    cout &lt;&lt; res &lt;&lt; <span class=\"hljs-string\">&#x27;\\n&#x27;</span>;<br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span> </span>&#123;<br>    ios::<span class=\"hljs-built_in\">sync_with_stdio</span>(<span class=\"hljs-number\">0</span>);<br>    cin.<span class=\"hljs-built_in\">tie</span>(<span class=\"hljs-number\">0</span>);<br>    <span class=\"hljs-built_in\">slove</span>();<br>&#125;<br></code></pre></td></tr></table></figure>\n<h2 id=\"14-提交记录\"><a class=\"markdownIt-Anchor\" href=\"#14-提交记录\">#</a> 1.4 提交记录</h2>\n<h1 id=\"2-序列查询新解\"><a class=\"markdownIt-Anchor\" href=\"#2-序列查询新解\">#</a> 2. 序列查询新解</h1>\n<h2 id=\"21-题目\"><a class=\"markdownIt-Anchor\" href=\"#21-题目\">#</a> 2.1 题目</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cDovLzExOC4xOTAuMjAuMTYyL3ZpZXcucGFnZT9ncGlkPVQxMzc=\">http://118.190.20.162/view.page?gpid=T137</span></p>\n<h2 id=\"22-解题思路\"><a class=\"markdownIt-Anchor\" href=\"#22-解题思路\">#</a> 2.2 解题思路</h2>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mspace width=\"2em\"/></mrow><annotation encoding=\"application/x-tex\">\\qquad</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0em;vertical-align:0em;\"></span><span class=\"mspace\" style=\"margin-right:2em;\"></span></span></span></span> 和上一题类似，对于数组 A 两项直接的所有取值，f (x) 都相等，因此我们只需要遍历 A 数组时，将每一个间隔区间的 | g (x) - f (x)| 算出来求和可以简化时间。</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mspace width=\"2em\"/></mrow><annotation encoding=\"application/x-tex\">\\qquad</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0em;vertical-align:0em;\"></span><span class=\"mspace\" style=\"margin-right:2em;\"></span></span></span></span> 统一计算 | g (x) - f (x)| 的时候，注意区间的两边的正负号情况。如果首尾的 g (x) - f (x) 正负号相同，直接计算即可。如果不同，则分别将负值和正值计算结果加起来即可。正负分界点与该区间最开始的值有关。</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mspace width=\"2em\"/></mrow><annotation encoding=\"application/x-tex\">\\qquad</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0em;vertical-align:0em;\"></span><span class=\"mspace\" style=\"margin-right:2em;\"></span></span></span></span> 在统一计算时，可以利用等差求和公式，先将区间里根据 |g (x) - f (x)| 数值的不同分组，一般情况下的小组成员数量就是 r，但分组后再可能处于边界的小组成员数量不足 r。我们先将其补到 r，套等差公式求和后再减去补上的成员。<br>\n示意图（以 r=3 为例）</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mspace width=\"2em\"/></mrow><annotation encoding=\"application/x-tex\">\\qquad</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0em;vertical-align:0em;\"></span><span class=\"mspace\" style=\"margin-right:2em;\"></span></span></span></span> 可以用滚动数组优化代码，这样的话时间复杂度为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span>, 空间复杂度为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></p>\n<h2 id=\"23-代码\"><a class=\"markdownIt-Anchor\" href=\"#23-代码\">#</a> 2.3 代码</h2>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mspace width=\"2em\"/></mrow><annotation encoding=\"application/x-tex\">\\qquad</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0em;vertical-align:0em;\"></span><span class=\"mspace\" style=\"margin-right:2em;\"></span></span></span></span> 没有用滚动数组优化的版本。使用 lambda 表达式主要是为了代码的可读性服务，虽然可能带来额外的性能开销，但可以基本忽略</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cpp\"><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;iostream&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">define</span> ll long long</span><br><span class=\"hljs-keyword\">using</span> <span class=\"hljs-keyword\">namespace</span> std;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">slove</span><span class=\"hljs-params\">()</span> </span>&#123;<br>   **** <span class=\"hljs-type\">int</span> n, N;<br>    ll error = <span class=\"hljs-number\">0</span>;<br>    cin &gt;&gt; n &gt;&gt; N;<br>    <span class=\"hljs-function\">vector&lt;<span class=\"hljs-type\">int</span>&gt; <span class=\"hljs-title\">A</span><span class=\"hljs-params\">(n + <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">0</span>)</span></span>;<br>    A[n+<span class=\"hljs-number\">1</span>] = N;<br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">1</span>; i &lt;= n; i++)cin &gt;&gt; A[i];<br>    <span class=\"hljs-type\">int</span> r = N / (n + <span class=\"hljs-number\">1</span>);<br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">1</span>; i &lt;= n+<span class=\"hljs-number\">1</span>; i++) &#123;<br>        ll f = A[i - <span class=\"hljs-number\">1</span>] / r - i + <span class=\"hljs-number\">1</span>, l = (A[i] - <span class=\"hljs-number\">1</span>) / r - i + <span class=\"hljs-number\">1</span>;<br>        <span class=\"hljs-keyword\">auto</span> p = [&amp;]()-&gt;<span class=\"hljs-type\">int</span> &#123;<br>            ll res = <span class=\"hljs-number\">0</span>;<br>            <span class=\"hljs-keyword\">if</span> (f * l &gt;= <span class=\"hljs-number\">0</span>) res += ((<span class=\"hljs-built_in\">abs</span>(f - l) + <span class=\"hljs-number\">1</span>) * <span class=\"hljs-built_in\">abs</span>(f + l)) / <span class=\"hljs-number\">2</span> * r;<br>            <span class=\"hljs-keyword\">else</span> res += (<span class=\"hljs-built_in\">abs</span>(f) + <span class=\"hljs-number\">1</span>) * <span class=\"hljs-built_in\">abs</span>(f) / <span class=\"hljs-number\">2</span> * r + (l + <span class=\"hljs-number\">1</span>) * l / <span class=\"hljs-number\">2</span> * r;<br>            <span class=\"hljs-keyword\">return</span> res - <span class=\"hljs-built_in\">abs</span>(f) * (A[i - <span class=\"hljs-number\">1</span>] % r) - <span class=\"hljs-built_in\">abs</span>(l) * ((r - (A[i] - <span class=\"hljs-number\">1</span>) % r) - <span class=\"hljs-number\">1</span>);<br>        &#125;;<br>        error += <span class=\"hljs-built_in\">p</span>();<br>    &#125;<br>    cout &lt;&lt; error &lt;&lt; <span class=\"hljs-string\">&#x27;\\n&#x27;</span>;<br>    <br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span> </span>&#123;<br>    ios::<span class=\"hljs-built_in\">sync_with_stdio</span>(<span class=\"hljs-number\">0</span>);<br>    cin.<span class=\"hljs-built_in\">tie</span>(<span class=\"hljs-number\">0</span>);<br>    <span class=\"hljs-built_in\">slove</span>();<br>&#125;<br></code></pre></td></tr></table></figure>\n<p>使用滚动数组优化并去除了 lambda 的版本</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cpp\"><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;iostream&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;vector&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">define</span> ll long long</span><br><span class=\"hljs-keyword\">using</span> <span class=\"hljs-keyword\">namespace</span> std;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">slove</span><span class=\"hljs-params\">()</span> </span>&#123;<br>    <span class=\"hljs-type\">int</span> n, N;<br>    ll error = <span class=\"hljs-number\">0</span>;<br>    cin &gt;&gt; n &gt;&gt; N;<br>    <span class=\"hljs-type\">int</span> r = N / (n + <span class=\"hljs-number\">1</span>), pre = <span class=\"hljs-number\">0</span>;<br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">1</span>; i &lt;= n + <span class=\"hljs-number\">1</span>; i++) &#123;<br>        <span class=\"hljs-type\">int</span> temp = N;<br>        <span class=\"hljs-keyword\">if</span> (i != n + <span class=\"hljs-number\">1</span>)cin &gt;&gt; temp;<br>        ll f = pre / r - i + <span class=\"hljs-number\">1</span>, l = (temp - <span class=\"hljs-number\">1</span>) / r - i + <span class=\"hljs-number\">1</span>;<br>        ll res = <span class=\"hljs-number\">0</span>;<br>        <span class=\"hljs-keyword\">if</span> (f * l &gt;= <span class=\"hljs-number\">0</span>) error += ((<span class=\"hljs-built_in\">abs</span>(f - l) + <span class=\"hljs-number\">1</span>) * <span class=\"hljs-built_in\">abs</span>(f + l)) / <span class=\"hljs-number\">2</span> * r;<br>        <span class=\"hljs-keyword\">else</span> error += (<span class=\"hljs-built_in\">abs</span>(f) + <span class=\"hljs-number\">1</span>) * <span class=\"hljs-built_in\">abs</span>(f) / <span class=\"hljs-number\">2</span> * r + (l + <span class=\"hljs-number\">1</span>) * l / <span class=\"hljs-number\">2</span> * r;<br>        error-=  <span class=\"hljs-built_in\">abs</span>(f) * (pre % r) + <span class=\"hljs-built_in\">abs</span>(l) * ((r - (temp - <span class=\"hljs-number\">1</span>) % r) - <span class=\"hljs-number\">1</span>);<br>        pre = temp;<br>    &#125;<br>    cout &lt;&lt; error &lt;&lt; <span class=\"hljs-string\">&#x27;\\n&#x27;</span>;<br>    <br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span> </span>&#123;<br>    ios::<span class=\"hljs-built_in\">sync_with_stdio</span>(<span class=\"hljs-number\">0</span>);<br>    cin.<span class=\"hljs-built_in\">tie</span>(<span class=\"hljs-number\">0</span>);<br>    <span class=\"hljs-built_in\">slove</span>();<br>&#125;<br></code></pre></td></tr></table></figure>\n<h2 id=\"24-提交记录\"><a class=\"markdownIt-Anchor\" href=\"#24-提交记录\">#</a> 2.4 提交记录</h2>\n<h1 id=\"3-登机牌条码\"><a class=\"markdownIt-Anchor\" href=\"#3-登机牌条码\">#</a> 3. 登机牌条码</h1>\n<h2 id=\"31-题目\"><a class=\"markdownIt-Anchor\" href=\"#31-题目\">#</a> 3.1 题目</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cDovLzExOC4xOTAuMjAuMTYyL3ZpZXcucGFnZT9ncGlkPVQxMzY=\">http://118.190.20.162/view.page?gpid=T136</span></p>\n<h2 id=\"32-解题思路\"><a class=\"markdownIt-Anchor\" href=\"#32-解题思路\">#</a> 3.2 解题思路</h2>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mspace width=\"2em\"/></mrow><annotation encoding=\"application/x-tex\">\\qquad</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0em;vertical-align:0em;\"></span><span class=\"mspace\" style=\"margin-right:2em;\"></span></span></span></span> 本题主要的模拟难点有两个：将给定的字符串转化为数据码，以及计算校验码。</p>\n<p>打印数据码可以使用有限状态机，定义一个抽象的状态类，使用虚函数重载状态转换和打印，最后定义一个状态转换器类型，在状态转换器中统一实现状态转换操作。</p>\n<p>当然，读者也可以简单的使用 switch 等效代替上面的逻辑。</p>\n<p>计算校验码用到多项式除法。根据题意，所求的 r (x) 就是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mo stretchy=\"false\">[</mo><msup><mi>x</mi><mi>k</mi></msup><mi>d</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mtext> </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext> </mtext><mi>g</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">-[x^kd(x)\\space mod \\space g(x)]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.099108em;vertical-align:-0.25em;\"></span><span class=\"mord\">−</span><span class=\"mopen\">[</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.849108em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span><span class=\"mord mathnormal\">d</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\"> </span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">d</span><span class=\"mspace\"> </span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mclose\">]</span></span></span></span></p>\n<h2 id=\"33-代码\"><a class=\"markdownIt-Anchor\" href=\"#33-代码\">#</a> 3.3 代码</h2>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cpp\"><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;iostream&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;vector&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">define</span> ll long long</span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">define</span> MOD 929</span><br><span class=\"hljs-keyword\">using</span> <span class=\"hljs-keyword\">namespace</span> std;<br><br><span class=\"hljs-keyword\">enum class</span> <span class=\"hljs-title class_\">State</span> &#123; Num, Small, Big &#125;;<br><br><span class=\"hljs-comment\">//抽象状态</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">StateClass</span> &#123;<br><span class=\"hljs-keyword\">public</span>:<br>    <span class=\"hljs-type\">static</span> vector&lt;<span class=\"hljs-type\">int</span>&gt; temp;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">virtual</span> <span class=\"hljs-type\">void</span> <span class=\"hljs-title\">print</span><span class=\"hljs-params\">(<span class=\"hljs-type\">char</span> c)</span> <span class=\"hljs-keyword\">noexcept</span> </span>= <span class=\"hljs-number\">0</span>;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">virtual</span> <span class=\"hljs-type\">void</span> <span class=\"hljs-title\">Change</span><span class=\"hljs-params\">(State newS)</span> <span class=\"hljs-keyword\">noexcept</span> </span>= <span class=\"hljs-number\">0</span>;<br>&#125;;<br>vector&lt;<span class=\"hljs-type\">int</span>&gt; StateClass::temp = &#123;&#125;;<span class=\"hljs-comment\">//实际的分配内存</span><br><br><span class=\"hljs-comment\">//实际的三种状态</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Num</span> :<span class=\"hljs-keyword\">public</span> StateClass &#123;<br><span class=\"hljs-keyword\">public</span>:<br>    <span class=\"hljs-type\">const</span> State state = State::Num;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">virtual</span> <span class=\"hljs-type\">void</span> <span class=\"hljs-title\">print</span><span class=\"hljs-params\">(<span class=\"hljs-type\">char</span> c)</span><span class=\"hljs-keyword\">noexcept</span> </span>&#123; temp.<span class=\"hljs-built_in\">push_back</span>(c - <span class=\"hljs-string\">&#x27;0&#x27;</span>); &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">virtual</span> <span class=\"hljs-type\">void</span> <span class=\"hljs-title\">Change</span><span class=\"hljs-params\">(State newS)</span> <span class=\"hljs-keyword\">noexcept</span> <span class=\"hljs-keyword\">override</span> </span>&#123;<br>        <span class=\"hljs-keyword\">switch</span> (newS) &#123;<br>        <span class=\"hljs-keyword\">case</span> State::Big: temp.<span class=\"hljs-built_in\">push_back</span>(<span class=\"hljs-number\">28</span>); <span class=\"hljs-keyword\">break</span>;<br>        <span class=\"hljs-keyword\">case</span> State::Small: temp.<span class=\"hljs-built_in\">push_back</span>(<span class=\"hljs-number\">27</span>); <span class=\"hljs-keyword\">break</span>;<br>        &#125;<br>    &#125;<br>&#125;;<br><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Small</span> :<span class=\"hljs-keyword\">public</span> StateClass &#123;<br><span class=\"hljs-keyword\">public</span>:<br>    <span class=\"hljs-type\">const</span> State state = State::Small;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">virtual</span> <span class=\"hljs-type\">void</span> <span class=\"hljs-title\">print</span><span class=\"hljs-params\">(<span class=\"hljs-type\">char</span> c)</span><span class=\"hljs-keyword\">noexcept</span> <span class=\"hljs-keyword\">override</span> </span>&#123; temp.<span class=\"hljs-built_in\">push_back</span>(c - <span class=\"hljs-string\">&#x27;a&#x27;</span>); &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">virtual</span> <span class=\"hljs-type\">void</span> <span class=\"hljs-title\">Change</span><span class=\"hljs-params\">(State newS)</span> <span class=\"hljs-keyword\">noexcept</span> <span class=\"hljs-keyword\">override</span> </span>&#123;<br>        <span class=\"hljs-keyword\">switch</span> (newS) &#123;<br>        <span class=\"hljs-keyword\">case</span> State::Big: temp.<span class=\"hljs-built_in\">push_back</span>(<span class=\"hljs-number\">28</span>),temp.<span class=\"hljs-built_in\">push_back</span>(<span class=\"hljs-number\">27</span>); <span class=\"hljs-keyword\">break</span>;<br>        <span class=\"hljs-keyword\">case</span> State::Num: temp.<span class=\"hljs-built_in\">push_back</span>(<span class=\"hljs-number\">28</span>); <span class=\"hljs-keyword\">break</span>;<br>        &#125;<br>    &#125;<br>&#125;;<br><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Big</span> :<span class=\"hljs-keyword\">public</span> StateClass &#123;<br><span class=\"hljs-keyword\">public</span>:<br>    <span class=\"hljs-type\">const</span> State state = State::Big;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">virtual</span> <span class=\"hljs-type\">void</span> <span class=\"hljs-title\">print</span><span class=\"hljs-params\">(<span class=\"hljs-type\">char</span> c)</span> <span class=\"hljs-keyword\">noexcept</span> <span class=\"hljs-keyword\">override</span> </span>&#123; temp.<span class=\"hljs-built_in\">push_back</span>(c - <span class=\"hljs-string\">&#x27;A&#x27;</span>); &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-keyword\">virtual</span> <span class=\"hljs-type\">void</span> <span class=\"hljs-title\">Change</span><span class=\"hljs-params\">(State newS)</span> <span class=\"hljs-keyword\">noexcept</span> <span class=\"hljs-keyword\">override</span> </span>&#123;<br>        <span class=\"hljs-keyword\">switch</span> (newS) &#123;<br>        <span class=\"hljs-keyword\">case</span> State::Small: temp.<span class=\"hljs-built_in\">push_back</span>(<span class=\"hljs-number\">27</span>); <span class=\"hljs-keyword\">break</span>;<br>        <span class=\"hljs-keyword\">case</span> State::Num: temp.<span class=\"hljs-built_in\">push_back</span>(<span class=\"hljs-number\">28</span>); <span class=\"hljs-keyword\">break</span>;<br>        &#125;<br>    &#125;<br>&#125;;<br><br><span class=\"hljs-comment\">//状态转移器</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Printer</span> &#123;<br>    State state;<br>    vector&lt;StateClass*&gt; v&#123; <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Num</span>(),<span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Small</span>(),<span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Big</span>() &#125;;<br><span class=\"hljs-keyword\">public</span>:<br>    StateClass* currentState;<br>    <span class=\"hljs-built_in\">Printer</span>(State _state)<br>        :<br>        <span class=\"hljs-built_in\">state</span>(_state),<span class=\"hljs-built_in\">currentState</span>(v[(<span class=\"hljs-type\">int</span>)_state]) <br>    &#123; &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">changeState</span><span class=\"hljs-params\">(State _state)</span> <span class=\"hljs-keyword\">noexcept</span> </span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (state == _state) <span class=\"hljs-keyword\">return</span>;<br>        currentState-&gt;<span class=\"hljs-built_in\">Change</span>(_state);<br>        currentState = v[(<span class=\"hljs-type\">int</span>)_state];<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">print</span><span class=\"hljs-params\">(<span class=\"hljs-type\">char</span> c)</span> </span>&#123; currentState-&gt;<span class=\"hljs-built_in\">print</span>(c); &#125;<br>&#125;;<br><br><span class=\"hljs-comment\">//计算编码</span><br><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">PrinterManger</span> &#123;<br><span class=\"hljs-keyword\">public</span>:<br>    State state;<br>    vector&lt;<span class=\"hljs-type\">int</span>&gt; DCode;<br>    vector&lt;<span class=\"hljs-type\">int</span>&gt; CCode;<br>    <br>    Printer printer;<br><br>    <span class=\"hljs-built_in\">PrinterManger</span>(string T)<span class=\"hljs-keyword\">noexcept</span>;<br><br>    <span class=\"hljs-function\">State <span class=\"hljs-title\">check</span><span class=\"hljs-params\">(<span class=\"hljs-type\">char</span> i)</span><span class=\"hljs-type\">const</span> <span class=\"hljs-keyword\">noexcept</span></span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-string\">&#x27;0&#x27;</span> &lt;= i&amp;&amp;i &lt;= <span class=\"hljs-string\">&#x27;9&#x27;</span>) <span class=\"hljs-keyword\">return</span> State::Num;<br>        <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-string\">&#x27;a&#x27;</span> &lt;= i&amp;&amp;i &lt;= <span class=\"hljs-string\">&#x27;z&#x27;</span>) <span class=\"hljs-keyword\">return</span> State::Small;<br>        <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">return</span> State::Big;<br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">UpdateCCode</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> k)</span> </span>&#123;<br>        <span class=\"hljs-keyword\">if</span> (!k)<span class=\"hljs-keyword\">return</span>;<br>        <span class=\"hljs-function\">vector&lt;<span class=\"hljs-type\">int</span>&gt; <span class=\"hljs-title\">g</span><span class=\"hljs-params\">(k+<span class=\"hljs-number\">1</span>)</span>, <span class=\"hljs-title\">d</span><span class=\"hljs-params\">(DCode)</span></span>;<br>        <br>        g[<span class=\"hljs-number\">0</span>] = <span class=\"hljs-number\">1</span>;<br>        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">1</span>, a = <span class=\"hljs-number\">-3</span>; i &lt;= k; a = a * <span class=\"hljs-number\">3</span> % MOD, i++) &#123;<br>            <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> j = i - <span class=\"hljs-number\">1</span>; j &gt;= <span class=\"hljs-number\">0</span>; j--) g[j + <span class=\"hljs-number\">1</span>] = (g[j + <span class=\"hljs-number\">1</span>] + g[j] * a) % MOD;<br>        &#125;<br>        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; d.<span class=\"hljs-built_in\">size</span>() - k; i++)&#123;<br>            <span class=\"hljs-type\">int</span> x = d[i];<br>            <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> j = <span class=\"hljs-number\">0</span>; j &lt; g.<span class=\"hljs-built_in\">size</span>(); j++) d[i + j] = (d[i + j] - g[j] * x % MOD) % MOD;<br>        &#125;<br><br>        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = d.<span class=\"hljs-built_in\">size</span>() - g.<span class=\"hljs-built_in\">size</span>() + <span class=\"hljs-number\">1</span>; i &lt; d.<span class=\"hljs-built_in\">size</span>(); i++) &#123;<br>            CCode[i-d.<span class=\"hljs-built_in\">size</span>() + g.<span class=\"hljs-built_in\">size</span>() - <span class=\"hljs-number\">1</span>]=((MOD - d[i]%MOD) % MOD);<br>        &#125;<br>        <br>    &#125;<br>    <span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">UpdateDCode</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> w)</span> </span>&#123;<br>        <span class=\"hljs-comment\">//更新DDcode,并根据宽度w补900。</span><br>        cout &lt;&lt; CCode.<span class=\"hljs-built_in\">size</span>() &lt;&lt; <span class=\"hljs-string\">&quot;\\n&quot;</span>;<br>        <span class=\"hljs-type\">int</span> x = w-(DCode.<span class=\"hljs-built_in\">size</span>() + CCode.<span class=\"hljs-built_in\">size</span>()) % w;<br>        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">1</span>; i &lt;= x; i++) &#123;<br>            DCode.<span class=\"hljs-built_in\">push_back</span>(<span class=\"hljs-number\">900</span>);<br>        &#125;<br>        DCode[<span class=\"hljs-number\">0</span>] = DCode.<span class=\"hljs-built_in\">size</span>() + CCode.<span class=\"hljs-built_in\">size</span>();<br>    &#125;<br><br>    <span class=\"hljs-keyword\">friend</span> ostream&amp; <span class=\"hljs-keyword\">operator</span>&lt;&lt;(ostream&amp; os, PrinterManger m) &#123;<br>        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">auto</span> i : m.DCode) os &lt;&lt; i &lt;&lt; <span class=\"hljs-string\">&#x27;\\n&#x27;</span>;<br>        <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">auto</span> i : m.CCode) os &lt;&lt; i &lt;&lt; <span class=\"hljs-string\">&#x27;\\n&#x27;</span>;<br>        <span class=\"hljs-keyword\">return</span> os;<br>    &#125;<br>&#125;;<br><br>PrinterManger::<span class=\"hljs-built_in\">PrinterManger</span>(string T)<span class=\"hljs-keyword\">noexcept</span><br>    :<br>    <span class=\"hljs-built_in\">state</span>(<span class=\"hljs-built_in\">check</span>(T[<span class=\"hljs-number\">0</span>])),<br>    <span class=\"hljs-built_in\">printer</span>(<span class=\"hljs-built_in\">check</span>(T[<span class=\"hljs-number\">0</span>]))<br>&#123;<br>    vector&lt;<span class=\"hljs-type\">int</span>&gt;&amp; temp = printer.currentState-&gt;temp;<br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">auto</span> i : T) &#123;<br>        printer.<span class=\"hljs-built_in\">changeState</span>(<span class=\"hljs-built_in\">check</span>(i)),printer.<span class=\"hljs-built_in\">print</span>(i);<br>    &#125;<br>    <span class=\"hljs-keyword\">if</span> (temp.<span class=\"hljs-built_in\">size</span>() &amp; <span class=\"hljs-number\">1</span>) temp.<span class=\"hljs-built_in\">push_back</span>(<span class=\"hljs-number\">29</span>);<br>    DCode.<span class=\"hljs-built_in\">push_back</span>(<span class=\"hljs-number\">0</span>);<br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; temp.<span class=\"hljs-built_in\">size</span>(); i += <span class=\"hljs-number\">2</span>) DCode.<span class=\"hljs-built_in\">push_back</span>(<span class=\"hljs-number\">30</span> * temp[i] + temp[i + <span class=\"hljs-number\">1</span>]);<br>&#125;<br><br><br><span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">slove</span><span class=\"hljs-params\">()</span> </span>&#123;<br>    string T;<br>    <span class=\"hljs-type\">int</span> s, w, k;<br>    cin &gt;&gt; w &gt;&gt; s &gt;&gt; T;<br>    <span class=\"hljs-function\">PrinterManger <span class=\"hljs-title\">m</span><span class=\"hljs-params\">(T)</span></span>;<br>    <span class=\"hljs-keyword\">if</span> (s==<span class=\"hljs-number\">-1</span>) k = <span class=\"hljs-number\">0</span>;<br>    <span class=\"hljs-keyword\">else</span> k = (<span class=\"hljs-type\">int</span>)<span class=\"hljs-built_in\">pow</span>(<span class=\"hljs-number\">2</span>, s + <span class=\"hljs-number\">1</span>);<br>    m.CCode = <span class=\"hljs-built_in\">vector</span>&lt;<span class=\"hljs-type\">int</span>&gt;(k);<br>    m.<span class=\"hljs-built_in\">UpdateCCode</span>(k);<br>    m.<span class=\"hljs-built_in\">UpdateDCode</span>(w);<br>    cout &lt;&lt; m &lt;&lt; <span class=\"hljs-string\">&#x27;\\n&#x27;</span>;<br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span> </span>&#123;<br>    ios::<span class=\"hljs-built_in\">sync_with_stdio</span>(<span class=\"hljs-number\">0</span>);<br>    cin.<span class=\"hljs-built_in\">tie</span>(<span class=\"hljs-number\">0</span>);<br>    <span class=\"hljs-built_in\">slove</span>();<br>&#125;<br></code></pre></td></tr></table></figure>\n<h1 id=\"4-磁盘文件操作\"><a class=\"markdownIt-Anchor\" href=\"#4-磁盘文件操作\">#</a> 4. 磁盘文件操作</h1>\n<h2 id=\"41-题目\"><a class=\"markdownIt-Anchor\" href=\"#41-题目\">#</a> 4.1 题目</h2>\n<h2 id=\"42-解题思路\"><a class=\"markdownIt-Anchor\" href=\"#42-解题思路\">#</a> 4.2 解题思路</h2>\n<p>本题涉及到区间查询和区间修改，可以使用线段树。但是如果直接使用完整的线段树，回超过题目要求的空间范围。因此考虑优化后的线段树</p>\n<ul>\n<li>\n<p>解法 1 离散化</p>\n<p>由于所有输入都已经知道，可以先将数据离散化之后再建树，时间复杂度为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>k</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>k</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(klogk)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">)</span></span></span></span></p>\n</li>\n<li>\n<p>解法 2 动态开点线段树</p>\n<p>普通的线段树开辟的空间并不能被完全利用，动态开点线段树可以在使用线段树时再开辟对应的空间，这样可以大大减少代码的空间复杂度。</p>\n</li>\n</ul>\n<h2 id=\"43-代码\"><a class=\"markdownIt-Anchor\" href=\"#43-代码\">#</a> 4.3 代码</h2>\n<ul>\n<li>解法一代码</li>\n</ul>\n  <figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cpp\"><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;algorithm&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;cmath&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;cstdio&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;cstring&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;iostream&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;queue&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;vector&gt;</span></span><br><span class=\"hljs-keyword\">using</span> <span class=\"hljs-keyword\">namespace</span> std;<br><span class=\"hljs-type\">const</span> <span class=\"hljs-type\">int</span> maxn = <span class=\"hljs-number\">200010</span>;<br><span class=\"hljs-type\">const</span> <span class=\"hljs-type\">int</span> INF = <span class=\"hljs-number\">1e9</span> + <span class=\"hljs-number\">10</span>;<br><span class=\"hljs-type\">int</span> n, m, k;<br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">define</span> ls o &lt;&lt; 1</span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">define</span> rs ls | 1</span><br><span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">treenode</span> &#123;<br>    <span class=\"hljs-comment\">// 当前节点的值，若不唯一则为 INF；lazy 为 INF 表示无延迟更新</span><br>    <span class=\"hljs-type\">int</span> val, lazy_val;<br>    <span class=\"hljs-comment\">// 当前占用 id，若存在除 0 以外两种 id 则为 -1；lazy 为 -1 表示无延迟更新</span><br>    <span class=\"hljs-type\">int</span> id1, lazy_id1;<br>    <span class=\"hljs-comment\">// 当前占用 id，若存在两种 id 则为 -1；lazy 为 -1 表示无延迟更新</span><br>    <span class=\"hljs-type\">int</span> id2, lazy_id2;<br>    <span class=\"hljs-comment\">// 上次占用 id，若存在两种 id 则为 -1；lazy 为 -1表示无延迟更新</span><br>    <span class=\"hljs-type\">int</span> lid, lazy_lid;<br>&#125; tree[maxn &lt;&lt; <span class=\"hljs-number\">5</span>];<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">pushup</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> o)</span> </span>&#123;<br>    <span class=\"hljs-comment\">// 线段树上传操作，合并左右子树结果</span><br>    <span class=\"hljs-comment\">// val 的合并</span><br>    tree[o].val = (tree[ls].val == tree[rs].val) ? tree[ls].val : INF;<br>    <span class=\"hljs-comment\">// id1 的合并</span><br>    <span class=\"hljs-keyword\">if</span> (tree[ls].id1 == <span class=\"hljs-number\">-1</span> || tree[rs].id1 == <span class=\"hljs-number\">-1</span>) &#123;<br>        tree[o].id1 = <span class=\"hljs-number\">-1</span>;<br>    &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (tree[ls].id1 == tree[rs].id1) &#123;<br>        tree[o].id1 = tree[ls].id1;<br>    &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (tree[ls].id1 == <span class=\"hljs-number\">0</span>) &#123;<br>        tree[o].id1 = tree[rs].id1;<br>    &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (tree[rs].id1 == <span class=\"hljs-number\">0</span>) &#123;<br>        tree[o].id1 = tree[ls].id1;<br>    &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>        tree[o].id1 = <span class=\"hljs-number\">-1</span>;<br>    &#125;<br>    <span class=\"hljs-comment\">// id2 的合并</span><br>    <span class=\"hljs-keyword\">if</span> (tree[ls].id2 == <span class=\"hljs-number\">-1</span> || tree[rs].id2 == <span class=\"hljs-number\">-1</span>) &#123;<br>        tree[o].id2 = <span class=\"hljs-number\">-1</span>;<br>    &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (tree[ls].id2 == tree[rs].id2) &#123;<br>        tree[o].id2 = tree[ls].id2;<br>    &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>        tree[o].id2 = <span class=\"hljs-number\">-1</span>;<br>    &#125;<br>    <span class=\"hljs-comment\">// lid 的合并</span><br>    <span class=\"hljs-keyword\">if</span> (tree[ls].lid == <span class=\"hljs-number\">-1</span> || tree[rs].lid == <span class=\"hljs-number\">-1</span>) &#123;<br>        tree[o].lid = <span class=\"hljs-number\">-1</span>;<br>    &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (tree[ls].lid == tree[rs].lid) &#123;<br>        tree[o].lid = tree[ls].lid;<br>    &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>        tree[o].lid = <span class=\"hljs-number\">-1</span>;<br>    &#125;<br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">pushdown</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> o)</span> </span>&#123;<br>    <span class=\"hljs-comment\">// 线段树标记下传操作</span><br>    <span class=\"hljs-keyword\">if</span> (tree[o].lazy_val != INF) &#123;<br>        tree[ls].val = tree[rs].val = tree[o].lazy_val;<br>        tree[ls].lazy_val = tree[rs].lazy_val = tree[o].lazy_val;<br>        tree[o].lazy_val = INF;<br>    &#125;<br>    <span class=\"hljs-keyword\">if</span> (tree[o].lazy_id1 != <span class=\"hljs-number\">-1</span>) &#123;<br>        tree[ls].id1 = tree[rs].id1 = tree[o].lazy_id1;<br>        tree[ls].lazy_id1 = tree[rs].lazy_id1 = tree[o].lazy_id1;<br>        tree[o].lazy_id1 = <span class=\"hljs-number\">-1</span>;<br>    &#125;<br>    <span class=\"hljs-keyword\">if</span> (tree[o].lazy_id2 != <span class=\"hljs-number\">-1</span>) &#123;<br>        tree[ls].id2 = tree[rs].id2 = tree[o].lazy_id2;<br>        tree[ls].lazy_id2 = tree[rs].lazy_id2 = tree[o].lazy_id2;<br>        tree[o].lazy_id2 = <span class=\"hljs-number\">-1</span>;<br>    &#125;<br>    <span class=\"hljs-keyword\">if</span> (tree[o].lazy_lid != <span class=\"hljs-number\">-1</span>) &#123;<br>        tree[ls].lid = tree[rs].lid = tree[o].lazy_lid;<br>        tree[ls].lazy_lid = tree[rs].lazy_lid = tree[o].lazy_lid;<br>        tree[o].lazy_lid = <span class=\"hljs-number\">-1</span>;<br>    &#125;<br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">build</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> o, <span class=\"hljs-type\">int</span> l, <span class=\"hljs-type\">int</span> r)</span> </span>&#123;<br>    <span class=\"hljs-comment\">// 线段树初始化建树</span><br>    <span class=\"hljs-keyword\">if</span> (l == r) &#123;<br>        tree[o].val = <span class=\"hljs-number\">0</span>;<br>        tree[o].lazy_val = INF;<br>        tree[o].id1 = tree[o].id2 = tree[o].lid = <span class=\"hljs-number\">0</span>;<br>        tree[o].lazy_id1 = tree[o].lazy_id2 = tree[o].lazy_lid = <span class=\"hljs-number\">-1</span>;<br>        <span class=\"hljs-keyword\">return</span>;<br>    &#125;<br>    <span class=\"hljs-type\">int</span> mid = (l + r) &gt;&gt; <span class=\"hljs-number\">1</span>;<br>    <span class=\"hljs-built_in\">build</span>(ls, l, mid);<br>    <span class=\"hljs-built_in\">build</span>(rs, mid + <span class=\"hljs-number\">1</span>, r);<br>    tree[o].lazy_val = INF;<br>    <span class=\"hljs-built_in\">pushup</span>(o);<br>&#125;<br><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">define</span> ALLOK -2</span><br><span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">find_right</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> o, <span class=\"hljs-type\">int</span> l, <span class=\"hljs-type\">int</span> r, <span class=\"hljs-type\">int</span> ql, <span class=\"hljs-type\">int</span> qid)</span> </span>&#123;<br>    <span class=\"hljs-comment\">// 操作一中，固定左端点，寻找右端点可能的最大值</span><br>    <span class=\"hljs-comment\">// 这里没有考虑和右端点的比较，直接寻找了最大的可能值</span><br>    <span class=\"hljs-built_in\">pushdown</span>(o);<br>    <span class=\"hljs-keyword\">if</span> (r &lt; ql || tree[o].id1 == qid || tree[o].id1 == <span class=\"hljs-number\">0</span>) &#123;<br>        <span class=\"hljs-comment\">// 全部符合条件</span><br>        <span class=\"hljs-keyword\">return</span> ALLOK;<br>    &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (tree[o].id2 != <span class=\"hljs-number\">-1</span>) &#123;<br>        <span class=\"hljs-comment\">// 不符合条件，返回该区域左边第一个</span><br>        <span class=\"hljs-keyword\">return</span> l - <span class=\"hljs-number\">1</span>;<br>    &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>        <span class=\"hljs-comment\">// 需要寻找确切位置</span><br>        <span class=\"hljs-comment\">// 先查找左区间，如果左区间全满足则再寻找右区间</span><br>        <span class=\"hljs-type\">int</span> mid = (l + r) &gt;&gt; <span class=\"hljs-number\">1</span>;<br>        <span class=\"hljs-type\">int</span> leftPart = (ql &lt;= mid) ? <span class=\"hljs-built_in\">find_right</span>(ls, l, mid, ql, qid) : ALLOK;<br>        <span class=\"hljs-keyword\">return</span> (leftPart == ALLOK) ? <span class=\"hljs-built_in\">find_right</span>(rs, mid + <span class=\"hljs-number\">1</span>, r, ql, qid)<br>                                : leftPart;<br>    &#125;<br>&#125;<br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">undef</span> ALLOK</span><br><br><span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">modify_val</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> o, <span class=\"hljs-type\">int</span> l, <span class=\"hljs-type\">int</span> r, <span class=\"hljs-type\">int</span> ql, <span class=\"hljs-type\">int</span> qr, <span class=\"hljs-type\">int</span> val, <span class=\"hljs-type\">int</span> id,</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">                <span class=\"hljs-type\">bool</span> ignoreLid = <span class=\"hljs-literal\">false</span>)</span> </span>&#123;<br>    <span class=\"hljs-comment\">// 若 val = INF 代表不需要对 val 进行处理</span><br>    <span class=\"hljs-comment\">// 若 ignoreLid = true 则不对 lid 进行更改</span><br>    <span class=\"hljs-keyword\">if</span> (l &gt;= ql &amp;&amp; r &lt;= qr) &#123;<br>        <span class=\"hljs-keyword\">if</span> (val != INF)<br>            tree[o].val = tree[o].lazy_val = val;<br>        tree[o].id1 = tree[o].lazy_id1 = id;<br>        tree[o].id2 = tree[o].lazy_id2 = id;<br>        <span class=\"hljs-keyword\">if</span> (!ignoreLid)<br>            tree[o].lid = tree[o].lazy_lid = id;<br>        <span class=\"hljs-keyword\">return</span>;<br>    &#125;<br>    <span class=\"hljs-built_in\">pushdown</span>(o);<br>    <span class=\"hljs-type\">int</span> mid = (l + r) &gt;&gt; <span class=\"hljs-number\">1</span>;<br>    <span class=\"hljs-keyword\">if</span> (ql &lt;= mid) &#123;<br>        <span class=\"hljs-built_in\">modify_val</span>(ls, l, mid, ql, qr, val, id, ignoreLid);<br>    &#125;<br>    <span class=\"hljs-keyword\">if</span> (qr &gt; mid) &#123;<br>        <span class=\"hljs-built_in\">modify_val</span>(rs, mid + <span class=\"hljs-number\">1</span>, r, ql, qr, val, id, ignoreLid);<br>    &#125;<br>    <span class=\"hljs-built_in\">pushup</span>(o);<br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">bool</span> <span class=\"hljs-title\">is_same_id</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> o, <span class=\"hljs-type\">int</span> l, <span class=\"hljs-type\">int</span> r, <span class=\"hljs-type\">int</span> ql, <span class=\"hljs-type\">int</span> qr, <span class=\"hljs-type\">int</span> id,</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">                <span class=\"hljs-type\">bool</span> isRecover = <span class=\"hljs-literal\">false</span>)</span> </span>&#123;<br>    <span class=\"hljs-comment\">// 判断该区域 id 和 lid 是否满足条件</span><br>    <span class=\"hljs-keyword\">if</span> (l &gt;= ql &amp;&amp; r &lt;= qr) &#123;<br>        <span class=\"hljs-keyword\">if</span> (isRecover) &#123;<br>            <span class=\"hljs-comment\">// 检查 id = 0 且 lid = id</span><br>            <span class=\"hljs-keyword\">return</span> (tree[o].id2 == <span class=\"hljs-number\">0</span> &amp;&amp; tree[o].lid == id);<br>        &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>            <span class=\"hljs-comment\">// 检查 id = id</span><br>            <span class=\"hljs-built_in\">return</span> (tree[o].id2 == id);<br>        &#125;<br>    &#125;<br>    <span class=\"hljs-built_in\">pushdown</span>(o);<br>    <span class=\"hljs-type\">int</span> mid = (l + r) &gt;&gt; <span class=\"hljs-number\">1</span>;<br>    <span class=\"hljs-type\">bool</span> isSame = <span class=\"hljs-literal\">true</span>;<br>    <span class=\"hljs-keyword\">if</span> (ql &lt;= mid) &#123;<br>        isSame = isSame &amp;&amp; <span class=\"hljs-built_in\">is_same_id</span>(ls, l, mid, ql, qr, id, isRecover);<br>    &#125;<br>    <span class=\"hljs-keyword\">if</span> (qr &gt; mid &amp;&amp; isSame) &#123;<br>        isSame = isSame &amp;&amp; <span class=\"hljs-built_in\">is_same_id</span>(rs, mid + <span class=\"hljs-number\">1</span>, r, ql, qr, id, isRecover);<br>    &#125;<br>    <span class=\"hljs-keyword\">return</span> isSame;<br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">query_val</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> o, <span class=\"hljs-type\">int</span> l, <span class=\"hljs-type\">int</span> r, <span class=\"hljs-type\">int</span> p)</span> </span>&#123;<br>    <span class=\"hljs-comment\">// 线段树单点求值：val</span><br>    <span class=\"hljs-keyword\">if</span> (p &gt;= l &amp;&amp; p &lt;= r &amp;&amp; tree[o].val != INF) &#123;<br>        <span class=\"hljs-keyword\">return</span> tree[o].val;<br>    &#125;<br>    <span class=\"hljs-built_in\">pushdown</span>(o);<br>    <span class=\"hljs-type\">int</span> mid = (l + r) &gt;&gt; <span class=\"hljs-number\">1</span>;<br>    <span class=\"hljs-keyword\">if</span> (p &lt;= mid)<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">query_val</span>(ls, l, mid, p);<br>    <span class=\"hljs-keyword\">else</span><br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">query_val</span>(rs, mid + <span class=\"hljs-number\">1</span>, r, p);<br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">query_id</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> o, <span class=\"hljs-type\">int</span> l, <span class=\"hljs-type\">int</span> r, <span class=\"hljs-type\">int</span> p)</span> </span>&#123;<br>    <span class=\"hljs-comment\">// 线段树单点求值：id2</span><br>    <span class=\"hljs-keyword\">if</span> (p &gt;= l &amp;&amp; p &lt;= r &amp;&amp; tree[o].id2 != <span class=\"hljs-number\">-1</span>) &#123;<br>        <span class=\"hljs-keyword\">return</span> tree[o].id2;<br>    &#125;<br>    <span class=\"hljs-built_in\">pushdown</span>(o);<br>    <span class=\"hljs-type\">int</span> mid = (l + r) &gt;&gt; <span class=\"hljs-number\">1</span>;<br>    <span class=\"hljs-keyword\">if</span> (p &lt;= mid)<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">query_id</span>(ls, l, mid, p);<br>    <span class=\"hljs-keyword\">else</span><br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">query_id</span>(rs, mid + <span class=\"hljs-number\">1</span>, r, p);<br>&#125;<br><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">undef</span> ls</span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">undef</span> rs</span><br><br><span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">instruction</span> &#123;<br>    <span class=\"hljs-type\">int</span> opt, id, l, r, x;<br>&#125; inst[maxn];<br><span class=\"hljs-comment\">// numList 存储所有可能出现的数，totnum 表示个数</span><br><span class=\"hljs-type\">int</span> numList[maxn &lt;&lt; <span class=\"hljs-number\">2</span>], totnum;<br><span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">discretization</span><span class=\"hljs-params\">()</span> </span>&#123;<br>    <span class=\"hljs-comment\">// 离散化操作</span><br>    <span class=\"hljs-built_in\">sort</span>(numList + <span class=\"hljs-number\">1</span>, numList + <span class=\"hljs-number\">1</span> + totnum);<br>    totnum = <span class=\"hljs-built_in\">unique</span>(numList + <span class=\"hljs-number\">1</span>, numList + <span class=\"hljs-number\">1</span> + totnum) - numList - <span class=\"hljs-number\">1</span>;<br>    m = totnum;<br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">1</span>; i &lt;= k; ++i) &#123;<br>        <span class=\"hljs-keyword\">if</span> (inst[i].opt == <span class=\"hljs-number\">0</span> || inst[i].opt == <span class=\"hljs-number\">1</span> || inst[i].opt == <span class=\"hljs-number\">2</span>) &#123;<br>            inst[i].l =<br>                <span class=\"hljs-built_in\">lower_bound</span>(numList + <span class=\"hljs-number\">1</span>, numList + <span class=\"hljs-number\">1</span> + totnum, inst[i].l) -<br>                numList;<br>            inst[i].r =<br>                <span class=\"hljs-built_in\">lower_bound</span>(numList + <span class=\"hljs-number\">1</span>, numList + <span class=\"hljs-number\">1</span> + totnum, inst[i].r) -<br>                numList;<br>        &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>            inst[i].x =<br>                <span class=\"hljs-built_in\">lower_bound</span>(numList + <span class=\"hljs-number\">1</span>, numList + <span class=\"hljs-number\">1</span> + totnum, inst[i].x) -<br>                numList;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span> </span>&#123;<br>    <span class=\"hljs-built_in\">scanf</span>(<span class=\"hljs-string\">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;k);<br>    numList[++totnum] = <span class=\"hljs-number\">1</span>;<br>    numList[++totnum] = m;<br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">1</span>; i &lt;= k; ++i) &#123;<br>        <span class=\"hljs-built_in\">scanf</span>(<span class=\"hljs-string\">&quot;%d&quot;</span>, &amp;inst[i].opt);<br>        <span class=\"hljs-keyword\">if</span> (inst[i].opt == <span class=\"hljs-number\">0</span>) &#123;<br>            <span class=\"hljs-built_in\">scanf</span>(<span class=\"hljs-string\">&quot;%d%d%d%d&quot;</span>, &amp;inst[i].id, &amp;inst[i].l, &amp;inst[i].r, &amp;inst[i].x);<br>            numList[++totnum] = inst[i].l;<br>            numList[++totnum] = inst[i].r;<br>            <span class=\"hljs-comment\">// 注意边界问题，为了方便这里把交界处两点分开了，下同</span><br>            <span class=\"hljs-keyword\">if</span> (inst[i].l != <span class=\"hljs-number\">1</span>)<br>                numList[++totnum] = inst[i].l - <span class=\"hljs-number\">1</span>;<br>            <span class=\"hljs-keyword\">if</span> (inst[i].r != m)<br>                numList[++totnum] = inst[i].r + <span class=\"hljs-number\">1</span>;<br>        &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (inst[i].opt == <span class=\"hljs-number\">1</span>) &#123;<br>            <span class=\"hljs-built_in\">scanf</span>(<span class=\"hljs-string\">&quot;%d%d%d&quot;</span>, &amp;inst[i].id, &amp;inst[i].l, &amp;inst[i].r);<br>            numList[++totnum] = inst[i].l;<br>            numList[++totnum] = inst[i].r;<br>            <span class=\"hljs-keyword\">if</span> (inst[i].l != <span class=\"hljs-number\">1</span>)<br>                numList[++totnum] = inst[i].l - <span class=\"hljs-number\">1</span>;<br>            <span class=\"hljs-keyword\">if</span> (inst[i].r != m)<br>                numList[++totnum] = inst[i].r + <span class=\"hljs-number\">1</span>;<br>        &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (inst[i].opt == <span class=\"hljs-number\">2</span>) &#123;<br>            <span class=\"hljs-built_in\">scanf</span>(<span class=\"hljs-string\">&quot;%d%d%d&quot;</span>, &amp;inst[i].id, &amp;inst[i].l, &amp;inst[i].r);<br>            numList[++totnum] = inst[i].l;<br>            numList[++totnum] = inst[i].r;<br>            <span class=\"hljs-keyword\">if</span> (inst[i].l != <span class=\"hljs-number\">1</span>)<br>                numList[++totnum] = inst[i].l - <span class=\"hljs-number\">1</span>;<br>            <span class=\"hljs-keyword\">if</span> (inst[i].r != m)<br>                numList[++totnum] = inst[i].r + <span class=\"hljs-number\">1</span>;<br>        &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>            <span class=\"hljs-built_in\">scanf</span>(<span class=\"hljs-string\">&quot;%d&quot;</span>, &amp;inst[i].x);<br>            <span class=\"hljs-comment\">// 对于查询的数，不需要进行离散化，查找第一个比它大的数即可</span><br>        &#125;<br>    &#125;<br><br>    <span class=\"hljs-comment\">// 离散化处理</span><br>    <span class=\"hljs-built_in\">discretization</span>();<br><br>    <span class=\"hljs-comment\">// 线段树初始化建树</span><br>    <span class=\"hljs-built_in\">build</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, m);<br><br>    <span class=\"hljs-comment\">// 进行操作</span><br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">1</span>; i &lt;= k; ++i) &#123;<br>        <span class=\"hljs-keyword\">if</span> (inst[i].opt == <span class=\"hljs-number\">0</span>) &#123;<br>            <span class=\"hljs-comment\">// 写入操作：先求得范围，再进行填充</span><br>            <span class=\"hljs-type\">int</span> r = <span class=\"hljs-built_in\">find_right</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, m, inst[i].l, inst[i].id);<br>            <span class=\"hljs-keyword\">if</span> (r == <span class=\"hljs-number\">-2</span>)<br>                <span class=\"hljs-comment\">// r = -2 代表全部满足</span><br>                r = inst[i].r;<br>            <span class=\"hljs-keyword\">else</span><br>                r = <span class=\"hljs-built_in\">min</span>(r, inst[i].r);<br>            <span class=\"hljs-keyword\">if</span> (inst[i].l &lt;= r) &#123;<br>                <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;%d\\n&quot;</span>, numList[r]); <span class=\"hljs-comment\">// 注意返回离散化前的值</span><br>                <span class=\"hljs-built_in\">modify_val</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, m, inst[i].l, r, inst[i].x, inst[i].id);<br>            &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>                <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;-1\\n&quot;</span>);<br>            &#125;<br>        &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (inst[i].opt == <span class=\"hljs-number\">1</span>) &#123;<br>            <span class=\"hljs-comment\">// 删除操作：先判断是否可行，之后执行</span><br>            <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">is_same_id</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, m, inst[i].l, inst[i].r, inst[i].id)) &#123;<br>                <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;OK\\n&quot;</span>);<br>                <span class=\"hljs-built_in\">modify_val</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, m, inst[i].l, inst[i].r, INF, <span class=\"hljs-number\">0</span>, <span class=\"hljs-literal\">true</span>);<br>            &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>                <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;FAIL\\n&quot;</span>);<br>            &#125;<br>        &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (inst[i].opt == <span class=\"hljs-number\">2</span>) &#123;<br>            <span class=\"hljs-comment\">// 恢复操作：先判断是否可行，之后执行</span><br>            <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">is_same_id</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, m, inst[i].l, inst[i].r, inst[i].id, <span class=\"hljs-literal\">true</span>)) &#123;<br>                <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;OK\\n&quot;</span>);<br>                <span class=\"hljs-built_in\">modify_val</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, m, inst[i].l, inst[i].r, INF, inst[i].id,<br>                        <span class=\"hljs-literal\">true</span>);<br>            &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>                <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;FAIL\\n&quot;</span>);<br>            &#125;<br>        &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (inst[i].opt == <span class=\"hljs-number\">3</span>) &#123;<br>            <span class=\"hljs-comment\">// 读取操作：分别读取 id 和 val</span><br>            <span class=\"hljs-type\">int</span> id = <span class=\"hljs-built_in\">query_id</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, m, inst[i].x);<br>            <span class=\"hljs-type\">int</span> val = <span class=\"hljs-built_in\">query_val</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, m, inst[i].x);<br>            <span class=\"hljs-keyword\">if</span> (id == <span class=\"hljs-number\">0</span>) &#123;<br>                <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;0 0\\n&quot;</span>);<br>            &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>                <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;%d %d\\n&quot;</span>, id, val);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>\n<ul>\n<li>解法二代码</li>\n</ul>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cpp\"><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;algorithm&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;cmath&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;cstdio&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;cstring&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;iostream&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;queue&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;vector&gt;</span></span><br><span class=\"hljs-keyword\">using</span> <span class=\"hljs-keyword\">namespace</span> std;<br><span class=\"hljs-type\">const</span> <span class=\"hljs-type\">int</span> maxn = <span class=\"hljs-number\">200010</span>;<br><span class=\"hljs-type\">const</span> <span class=\"hljs-type\">int</span> INF = <span class=\"hljs-number\">1e9</span> + <span class=\"hljs-number\">10</span>;<br><span class=\"hljs-type\">int</span> n, m, k;<br><span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">treenode</span> &#123;<br>    <span class=\"hljs-comment\">// 左右子节点编号</span><br>    <span class=\"hljs-type\">int</span> lc, rc;<br>    <span class=\"hljs-comment\">// 当前节点的值，若不唯一则为 INF；lazy 为 INF 表示无延迟更新</span><br>    <span class=\"hljs-type\">int</span> val, lazy_val;<br>    <span class=\"hljs-comment\">// 当前占用 id，若存在除 0 以外两种 id 则为 -1；lazy 为 -1 表示无延迟更新</span><br>    <span class=\"hljs-type\">int</span> id1, lazy_id1;<br>    <span class=\"hljs-comment\">// 当前占用 id，若存在两种 id 则为 -1；lazy 为 -1 表示无延迟更新</span><br>    <span class=\"hljs-type\">int</span> id2, lazy_id2;<br>    <span class=\"hljs-comment\">// 上次占用 id，若存在两种 id 则为 -1；lazy 为 -1表示无延迟更新</span><br>    <span class=\"hljs-type\">int</span> lid, lazy_lid;<br>&#125; tree[maxn &lt;&lt; <span class=\"hljs-number\">5</span>];<br><span class=\"hljs-type\">int</span> cnt; <span class=\"hljs-comment\">// 线段树节点个数</span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">define</span> ls tree[o].lc</span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">define</span> rs tree[o].rc</span><br><span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">insert_node</span><span class=\"hljs-params\">()</span> </span>&#123;<br>    <span class=\"hljs-comment\">// 向线段树中插入一个节点</span><br>    ++cnt;<br>    tree[cnt].lc = tree[cnt].rc = <span class=\"hljs-number\">0</span>;<br>    tree[cnt].val = <span class=\"hljs-number\">0</span>;<br>    tree[cnt].id1 = tree[cnt].id2 = <span class=\"hljs-number\">0</span>;<br>    tree[cnt].lid = <span class=\"hljs-number\">0</span>;<br>    tree[cnt].lazy_val = INF;<br>    tree[cnt].lazy_id1 = tree[cnt].lazy_id2 = <span class=\"hljs-number\">-1</span>;<br>    tree[cnt].lid = <span class=\"hljs-number\">-1</span>;<br>    <span class=\"hljs-keyword\">return</span> cnt;<br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">pushup</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> o)</span> </span>&#123;<br>    <span class=\"hljs-comment\">// 线段树上传操作，合并左右子树结果</span><br>    <span class=\"hljs-comment\">// val 的合并</span><br>    tree[o].val = (tree[ls].val == tree[rs].val) ? tree[ls].val : INF;<br>    <span class=\"hljs-comment\">// id1 的合并</span><br>    <span class=\"hljs-keyword\">if</span> (tree[ls].id1 == <span class=\"hljs-number\">-1</span> || tree[rs].id1 == <span class=\"hljs-number\">-1</span>) &#123;<br>        tree[o].id1 = <span class=\"hljs-number\">-1</span>;<br>    &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (tree[ls].id1 == tree[rs].id1) &#123;<br>        tree[o].id1 = tree[ls].id1;<br>    &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (tree[ls].id1 == <span class=\"hljs-number\">0</span>) &#123;<br>        tree[o].id1 = tree[rs].id1;<br>    &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (tree[rs].id1 == <span class=\"hljs-number\">0</span>) &#123;<br>        tree[o].id1 = tree[ls].id1;<br>    &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>        tree[o].id1 = <span class=\"hljs-number\">-1</span>;<br>    &#125;<br>    <span class=\"hljs-comment\">// id2 的合并</span><br>    <span class=\"hljs-keyword\">if</span> (tree[ls].id2 == <span class=\"hljs-number\">-1</span> || tree[rs].id2 == <span class=\"hljs-number\">-1</span>) &#123;<br>        tree[o].id2 = <span class=\"hljs-number\">-1</span>;<br>    &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (tree[ls].id2 == tree[rs].id2) &#123;<br>        tree[o].id2 = tree[ls].id2;<br>    &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>        tree[o].id2 = <span class=\"hljs-number\">-1</span>;<br>    &#125;<br>    <span class=\"hljs-comment\">// lid 的合并</span><br>    <span class=\"hljs-keyword\">if</span> (tree[ls].lid == <span class=\"hljs-number\">-1</span> || tree[rs].lid == <span class=\"hljs-number\">-1</span>) &#123;<br>        tree[o].lid = <span class=\"hljs-number\">-1</span>;<br>    &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (tree[ls].lid == tree[rs].lid) &#123;<br>        tree[o].lid = tree[ls].lid;<br>    &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>        tree[o].lid = <span class=\"hljs-number\">-1</span>;<br>    &#125;<br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">pushdown</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> o)</span> </span>&#123;<br>    <span class=\"hljs-comment\">// 线段树标记下传操作</span><br>    <span class=\"hljs-comment\">// 如果对应点未被创建，则进行创建</span><br>    <span class=\"hljs-keyword\">if</span> (!ls)<br>        ls = <span class=\"hljs-built_in\">insert_node</span>();<br>    <span class=\"hljs-keyword\">if</span> (!rs)<br>        rs = <span class=\"hljs-built_in\">insert_node</span>();<br>    <span class=\"hljs-keyword\">if</span> (tree[o].lazy_val != INF) &#123;<br>        tree[ls].val = tree[rs].val = tree[o].lazy_val;<br>        tree[ls].lazy_val = tree[rs].lazy_val = tree[o].lazy_val;<br>        tree[o].lazy_val = INF;<br>    &#125;<br>    <span class=\"hljs-keyword\">if</span> (tree[o].lazy_id1 != <span class=\"hljs-number\">-1</span>) &#123;<br>        tree[ls].id1 = tree[rs].id1 = tree[o].lazy_id1;<br>        tree[ls].lazy_id1 = tree[rs].lazy_id1 = tree[o].lazy_id1;<br>        tree[o].lazy_id1 = <span class=\"hljs-number\">-1</span>;<br>    &#125;<br>    <span class=\"hljs-keyword\">if</span> (tree[o].lazy_id2 != <span class=\"hljs-number\">-1</span>) &#123;<br>        tree[ls].id2 = tree[rs].id2 = tree[o].lazy_id2;<br>        tree[ls].lazy_id2 = tree[rs].lazy_id2 = tree[o].lazy_id2;<br>        tree[o].lazy_id2 = <span class=\"hljs-number\">-1</span>;<br>    &#125;<br>    <span class=\"hljs-keyword\">if</span> (tree[o].lazy_lid != <span class=\"hljs-number\">-1</span>) &#123;<br>        tree[ls].lid = tree[rs].lid = tree[o].lazy_lid;<br>        tree[ls].lazy_lid = tree[rs].lazy_lid = tree[o].lazy_lid;<br>        tree[o].lazy_lid = <span class=\"hljs-number\">-1</span>;<br>    &#125;<br>&#125;<br><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">define</span> ALLOK -2</span><br><span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">find_right</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> o, <span class=\"hljs-type\">int</span> l, <span class=\"hljs-type\">int</span> r, <span class=\"hljs-type\">int</span> ql, <span class=\"hljs-type\">int</span> qid)</span> </span>&#123;<br>    <span class=\"hljs-comment\">// 操作一中，固定左端点，寻找右端点可能的最大值</span><br>    <span class=\"hljs-comment\">// 这里没有考虑和右端点的比较，直接寻找了最大的可能值</span><br>    <span class=\"hljs-built_in\">pushdown</span>(o);<br>    <span class=\"hljs-keyword\">if</span> (r &lt; ql || tree[o].id1 == qid || tree[o].id1 == <span class=\"hljs-number\">0</span>) &#123;<br>        <span class=\"hljs-comment\">// 全部符合条件</span><br>        <span class=\"hljs-keyword\">return</span> ALLOK;<br>    &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (tree[o].id2 != <span class=\"hljs-number\">-1</span>) &#123;<br>        <span class=\"hljs-comment\">// 不符合条件，返回该区域左边第一个</span><br>        <span class=\"hljs-keyword\">return</span> l - <span class=\"hljs-number\">1</span>;<br>    &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>        <span class=\"hljs-comment\">// 需要寻找确切位置</span><br>        <span class=\"hljs-comment\">// 先查找左区间，如果左区间全满足则再寻找右区间</span><br>        <span class=\"hljs-type\">int</span> mid = (l + r) &gt;&gt; <span class=\"hljs-number\">1</span>;<br>        <span class=\"hljs-type\">int</span> leftPart = (ql &lt;= mid) ? <span class=\"hljs-built_in\">find_right</span>(ls, l, mid, ql, qid) : ALLOK;<br>        <span class=\"hljs-keyword\">return</span> (leftPart == ALLOK) ? <span class=\"hljs-built_in\">find_right</span>(rs, mid + <span class=\"hljs-number\">1</span>, r, ql, qid)<br>                                : leftPart;<br>    &#125;<br>&#125;<br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">undef</span> ALLOK</span><br><br><span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">modify_val</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> o, <span class=\"hljs-type\">int</span> l, <span class=\"hljs-type\">int</span> r, <span class=\"hljs-type\">int</span> ql, <span class=\"hljs-type\">int</span> qr, <span class=\"hljs-type\">int</span> val, <span class=\"hljs-type\">int</span> id,</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">                <span class=\"hljs-type\">bool</span> ignoreLid = <span class=\"hljs-literal\">false</span>)</span> </span>&#123;<br>    <span class=\"hljs-comment\">// 若 val = INF 代表不需要对 val 进行处理</span><br>    <span class=\"hljs-comment\">// 若 ignoreLid = true 则不对 lid 进行更改</span><br>    <span class=\"hljs-keyword\">if</span> (l &gt;= ql &amp;&amp; r &lt;= qr) &#123;<br>        <span class=\"hljs-keyword\">if</span> (val != INF)<br>            tree[o].val = tree[o].lazy_val = val;<br>        tree[o].id1 = tree[o].lazy_id1 = id;<br>        tree[o].id2 = tree[o].lazy_id2 = id;<br>        <span class=\"hljs-keyword\">if</span> (!ignoreLid)<br>            tree[o].lid = tree[o].lazy_lid = id;<br>        <span class=\"hljs-keyword\">return</span>;<br>    &#125;<br>    <span class=\"hljs-built_in\">pushdown</span>(o);<br>    <span class=\"hljs-type\">int</span> mid = (l + r) &gt;&gt; <span class=\"hljs-number\">1</span>;<br>    <span class=\"hljs-keyword\">if</span> (ql &lt;= mid) &#123;<br>        <span class=\"hljs-built_in\">modify_val</span>(ls, l, mid, ql, qr, val, id, ignoreLid);<br>    &#125;<br>    <span class=\"hljs-keyword\">if</span> (qr &gt; mid) &#123;<br>        <span class=\"hljs-built_in\">modify_val</span>(rs, mid + <span class=\"hljs-number\">1</span>, r, ql, qr, val, id, ignoreLid);<br>    &#125;<br>    <span class=\"hljs-built_in\">pushup</span>(o);<br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">bool</span> <span class=\"hljs-title\">is_same_id</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> o, <span class=\"hljs-type\">int</span> l, <span class=\"hljs-type\">int</span> r, <span class=\"hljs-type\">int</span> ql, <span class=\"hljs-type\">int</span> qr, <span class=\"hljs-type\">int</span> id,</span></span><br><span class=\"hljs-params\"><span class=\"hljs-function\">                <span class=\"hljs-type\">bool</span> isRecover = <span class=\"hljs-literal\">false</span>)</span> </span>&#123;<br>    <span class=\"hljs-comment\">// 判断该区域 id 和 lid 是否满足条件</span><br>    <span class=\"hljs-keyword\">if</span> (l &gt;= ql &amp;&amp; r &lt;= qr) &#123;<br>        <span class=\"hljs-keyword\">if</span> (isRecover) &#123;<br>            <span class=\"hljs-comment\">// 检查 id = 0 且 lid = id</span><br>            <span class=\"hljs-keyword\">return</span> (tree[o].id2 == <span class=\"hljs-number\">0</span> &amp;&amp; tree[o].lid == id);<br>        &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>            <span class=\"hljs-comment\">// 检查 id = id</span><br>            <span class=\"hljs-built_in\">return</span> (tree[o].id2 == id);<br>        &#125;<br>    &#125;<br>    <span class=\"hljs-built_in\">pushdown</span>(o);<br>    <span class=\"hljs-type\">int</span> mid = (l + r) &gt;&gt; <span class=\"hljs-number\">1</span>;<br>    <span class=\"hljs-type\">bool</span> isSame = <span class=\"hljs-literal\">true</span>;<br>    <span class=\"hljs-keyword\">if</span> (ql &lt;= mid) &#123;<br>        isSame = isSame &amp;&amp; <span class=\"hljs-built_in\">is_same_id</span>(ls, l, mid, ql, qr, id, isRecover);<br>    &#125;<br>    <span class=\"hljs-keyword\">if</span> (qr &gt; mid &amp;&amp; isSame) &#123;<br>        isSame = isSame &amp;&amp; <span class=\"hljs-built_in\">is_same_id</span>(rs, mid + <span class=\"hljs-number\">1</span>, r, ql, qr, id, isRecover);<br>    &#125;<br>    <span class=\"hljs-keyword\">return</span> isSame;<br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">query_val</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> o, <span class=\"hljs-type\">int</span> l, <span class=\"hljs-type\">int</span> r, <span class=\"hljs-type\">int</span> p)</span> </span>&#123;<br>    <span class=\"hljs-comment\">// 线段树单点求值：val</span><br>    <span class=\"hljs-keyword\">if</span> (p &gt;= l &amp;&amp; p &lt;= r &amp;&amp; tree[o].val != INF) &#123;<br>        <span class=\"hljs-keyword\">return</span> tree[o].val;<br>    &#125;<br>    <span class=\"hljs-built_in\">pushdown</span>(o);<br>    <span class=\"hljs-type\">int</span> mid = (l + r) &gt;&gt; <span class=\"hljs-number\">1</span>;<br>    <span class=\"hljs-keyword\">if</span> (p &lt;= mid)<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">query_val</span>(ls, l, mid, p);<br>    <span class=\"hljs-keyword\">else</span><br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">query_val</span>(rs, mid + <span class=\"hljs-number\">1</span>, r, p);<br>&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">query_id</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> o, <span class=\"hljs-type\">int</span> l, <span class=\"hljs-type\">int</span> r, <span class=\"hljs-type\">int</span> p)</span> </span>&#123;<br>    <span class=\"hljs-comment\">// 线段树单点求值：id2</span><br>    <span class=\"hljs-keyword\">if</span> (p &gt;= l &amp;&amp; p &lt;= r &amp;&amp; tree[o].id2 != <span class=\"hljs-number\">-1</span>) &#123;<br>        <span class=\"hljs-keyword\">return</span> tree[o].id2;<br>    &#125;<br>    <span class=\"hljs-built_in\">pushdown</span>(o);<br>    <span class=\"hljs-type\">int</span> mid = (l + r) &gt;&gt; <span class=\"hljs-number\">1</span>;<br>    <span class=\"hljs-keyword\">if</span> (p &lt;= mid)<br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">query_id</span>(ls, l, mid, p);<br>    <span class=\"hljs-keyword\">else</span><br>        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">query_id</span>(rs, mid + <span class=\"hljs-number\">1</span>, r, p);<br>&#125;<br><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">undef</span> ls</span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">undef</span> rs</span><br><br><span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span> </span>&#123;<br>    <span class=\"hljs-built_in\">scanf</span>(<span class=\"hljs-string\">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;k);<br>    <span class=\"hljs-comment\">// 创建根节点</span><br>    <span class=\"hljs-built_in\">insert_node</span>();<br>    <span class=\"hljs-comment\">// 进行操作</span><br>    <span class=\"hljs-type\">int</span> r_opt, r_id, r_l, r_r, r_x, r_p;<br>    <span class=\"hljs-keyword\">while</span> (k--) &#123;<br>        <span class=\"hljs-built_in\">scanf</span>(<span class=\"hljs-string\">&quot;%d&quot;</span>, &amp;r_opt);<br>        <span class=\"hljs-keyword\">if</span> (r_opt == <span class=\"hljs-number\">0</span>) &#123;<br>            <span class=\"hljs-comment\">// 写入</span><br>            <span class=\"hljs-built_in\">scanf</span>(<span class=\"hljs-string\">&quot;%d%d%d%d&quot;</span>, &amp;r_id, &amp;r_l, &amp;r_r, &amp;r_x);<br>            <span class=\"hljs-type\">int</span> r = <span class=\"hljs-built_in\">find_right</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, m, r_l, r_id);<br>            <span class=\"hljs-keyword\">if</span> (r == <span class=\"hljs-number\">-2</span>)<br>                r = r_r;<br>            <span class=\"hljs-keyword\">else</span><br>                r = <span class=\"hljs-built_in\">min</span>(r, r_r);<br>            <span class=\"hljs-keyword\">if</span> (r_l &lt;= r) &#123;<br>                <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;%d\\n&quot;</span>, r);<br>                <span class=\"hljs-built_in\">modify_val</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, m, r_l, r, r_x, r_id);<br>            &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>                <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;-1\\n&quot;</span>);<br>            &#125;<br>        &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (r_opt == <span class=\"hljs-number\">1</span>) &#123;<br>            <span class=\"hljs-comment\">// 删除</span><br>            <span class=\"hljs-built_in\">scanf</span>(<span class=\"hljs-string\">&quot;%d%d%d&quot;</span>, &amp;r_id, &amp;r_l, &amp;r_r);<br>            <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">is_same_id</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, m, r_l, r_r, r_id)) &#123;<br>                <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;OK\\n&quot;</span>);<br>                <span class=\"hljs-built_in\">modify_val</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, m, r_l, r_r, INF, <span class=\"hljs-number\">0</span>, <span class=\"hljs-literal\">true</span>);<br>            &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>                <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;FAIL\\n&quot;</span>);<br>            &#125;<br>        &#125; <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> (r_opt == <span class=\"hljs-number\">2</span>) &#123;<br>            <span class=\"hljs-comment\">// 恢复</span><br>            <span class=\"hljs-built_in\">scanf</span>(<span class=\"hljs-string\">&quot;%d%d%d&quot;</span>, &amp;r_id, &amp;r_l, &amp;r_r);<br>            <span class=\"hljs-keyword\">if</span> (<span class=\"hljs-built_in\">is_same_id</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, m, r_l, r_r, r_id, <span class=\"hljs-literal\">true</span>)) &#123;<br>                <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;OK\\n&quot;</span>);<br>                <span class=\"hljs-built_in\">modify_val</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, m, r_l, r_r, INF, r_id, <span class=\"hljs-literal\">true</span>);<br>            &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>                <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;FAIL\\n&quot;</span>);<br>            &#125;<br>        &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>            <span class=\"hljs-comment\">// 查询</span><br>            <span class=\"hljs-built_in\">scanf</span>(<span class=\"hljs-string\">&quot;%d&quot;</span>, &amp;r_p);<br>            <span class=\"hljs-type\">int</span> id = <span class=\"hljs-built_in\">query_id</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, m, r_p);<br>            <span class=\"hljs-type\">int</span> val = <span class=\"hljs-built_in\">query_val</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, m, r_p);<br>            <span class=\"hljs-keyword\">if</span> (id == <span class=\"hljs-number\">0</span>) &#123;<br>                <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;0 0\\n&quot;</span>);<br>            &#125; <span class=\"hljs-keyword\">else</span> &#123;<br>                <span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;%d %d\\n&quot;</span>, id, val);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>\n<h2 id=\"44-提交记录\"><a class=\"markdownIt-Anchor\" href=\"#44-提交记录\">#</a> 4.4 提交记录</h2>\n<ul>\n<li>\n<p>解法一<br>\n [图片]</p>\n</li>\n<li>\n<p>解法二<br>\n [图片]</p>\n</li>\n</ul>\n<h1 id=\"5-极差路径\"><a class=\"markdownIt-Anchor\" href=\"#5-极差路径\">#</a> 5. 极差路径</h1>\n<h2 id=\"51-题目\"><a class=\"markdownIt-Anchor\" href=\"#51-题目\">#</a> 5.1 题目</h2>\n<h2 id=\"52-解题思路\"><a class=\"markdownIt-Anchor\" href=\"#52-解题思路\">#</a> 5.2 解题思路</h2>\n<p>代码及思路来源：<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuc2lsbGxhZ2UuY29tL2NjZi1jc3AtMjQtZS8=\">https://www.silllage.com/ccf-csp-24-e/</span></p>\n<p>使用点分治以及可持久化线段树实现三维数点，时间复杂度控制在<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(nlogn)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span> 附近</p>\n<h2 id=\"53-代码\"><a class=\"markdownIt-Anchor\" href=\"#53-代码\">#</a> 5.3 代码</h2>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cpp\"><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;iostream&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;cstdio&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;vector&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;algorithm&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">pragma</span> GCC optimize(3)</span><br><span class=\"hljs-keyword\">using</span> <span class=\"hljs-keyword\">namespace</span> std;<br><span class=\"hljs-type\">const</span> <span class=\"hljs-type\">int</span> maxn = <span class=\"hljs-number\">5e5</span>+<span class=\"hljs-number\">10</span>;<br><span class=\"hljs-type\">const</span> <span class=\"hljs-type\">int</span> INF = <span class=\"hljs-number\">1e9</span> + <span class=\"hljs-number\">10</span>;<br>vector&lt;<span class=\"hljs-type\">int</span>&gt; g[maxn];<br><span class=\"hljs-type\">int</span> S, Mx, K1, K2, n, root;<br><span class=\"hljs-type\">int</span> sm[maxn], mxson[maxn], vis[maxn];<br><span class=\"hljs-type\">char</span> buf[<span class=\"hljs-number\">1</span>&lt;&lt;<span class=\"hljs-number\">23</span>],*p1=buf,*p2=buf,obuf[<span class=\"hljs-number\">1</span>&lt;&lt;<span class=\"hljs-number\">23</span>],*O=obuf;<br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">define</span> getchar() (p1==p2&amp;&amp;(p2=(p1=buf)+fread(buf,1,1&lt;&lt;21,stdin),p1==p2)?EOF:*p1++)</span><br><span class=\"hljs-function\"><span class=\"hljs-keyword\">inline</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title\">rd</span><span class=\"hljs-params\">()</span> </span>&#123;<br><span class=\"hljs-type\">int</span> x=<span class=\"hljs-number\">0</span>,f=<span class=\"hljs-number\">1</span>;<br><span class=\"hljs-type\">char</span> ch=<span class=\"hljs-built_in\">getchar</span>();<br><span class=\"hljs-keyword\">while</span>(!<span class=\"hljs-built_in\">isdigit</span>(ch))&#123;<br><span class=\"hljs-keyword\">if</span>(ch==<span class=\"hljs-string\">&#x27;-&#x27;</span>) f=<span class=\"hljs-number\">-1</span>;ch=<span class=\"hljs-built_in\">getchar</span>();<br>&#125;<br><span class=\"hljs-keyword\">while</span>(<span class=\"hljs-built_in\">isdigit</span>(ch)) x=x*<span class=\"hljs-number\">10</span>+(ch^<span class=\"hljs-number\">48</span>),ch=<span class=\"hljs-built_in\">getchar</span>();<br><span class=\"hljs-keyword\">return</span> x*f;<br>&#125;<br><span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">getrt</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> u, <span class=\"hljs-type\">int</span> fa)</span></span>&#123;<br>    sm[u] = <span class=\"hljs-number\">1</span>;<br>    mxson[u] = <span class=\"hljs-number\">0</span>;<br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> v : g[u]) <br>        <span class=\"hljs-keyword\">if</span> (!vis[v] &amp;&amp; v != fa)&#123;<br>            <span class=\"hljs-built_in\">getrt</span>(v, u);<br>            sm[u] += sm[v];<br>            mxson[u] = <span class=\"hljs-built_in\">max</span>(mxson[u], sm[v]);<br>        &#125;<br>    mxson[u] = <span class=\"hljs-built_in\">max</span>(mxson[u], S - sm[u]);<br>    <span class=\"hljs-keyword\">if</span> (mxson[u] &lt; Mx)&#123;<br>        root = u;<br>        Mx = mxson[u];<br>    &#125;<br>&#125;<br><span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">get</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> u, <span class=\"hljs-type\">int</span> fa, vector&lt;<span class=\"hljs-type\">int</span>&gt; &amp; nodes, pair&lt;<span class=\"hljs-type\">int</span>, <span class=\"hljs-type\">int</span>&gt; *value, <span class=\"hljs-type\">int</span> mn, <span class=\"hljs-type\">int</span> mx)</span> </span>&#123; <br>    nodes.<span class=\"hljs-built_in\">push_back</span>(u);<br>    value[u].first = mn;<br>    value[u].second = mx;<br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> v : g[u]) <span class=\"hljs-keyword\">if</span> (!vis[v] &amp;&amp; v != fa)&#123;<br>        <span class=\"hljs-built_in\">get</span>(v, u, nodes, value, <span class=\"hljs-built_in\">min</span>(mn, v), <span class=\"hljs-built_in\">max</span>(mx, v));<br>    &#125;<br>&#125;<br><span class=\"hljs-type\">int</span> rt[maxn], sz[maxn * <span class=\"hljs-number\">20</span>], ch[maxn * <span class=\"hljs-number\">20</span>][<span class=\"hljs-number\">2</span>], top = <span class=\"hljs-number\">0</span>;<br><span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">newnode</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> x)</span></span>&#123;<br>    sz[++top] = sz[x];<br>    ch[top][<span class=\"hljs-number\">0</span>] = ch[x][<span class=\"hljs-number\">0</span>];<br>    ch[top][<span class=\"hljs-number\">1</span>] = ch[x][<span class=\"hljs-number\">1</span>];<br>    <span class=\"hljs-keyword\">return</span> top;<br>&#125;<br><span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">ins</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> &amp;rt, <span class=\"hljs-type\">int</span> l, <span class=\"hljs-type\">int</span> r, <span class=\"hljs-type\">int</span> val)</span> </span>&#123;<br>    rt = <span class=\"hljs-built_in\">newnode</span>(rt);<br>    sz[rt]++;<span class=\"hljs-type\">int</span> t = rt; <br>    <span class=\"hljs-keyword\">while</span> (l &lt; r)&#123;<br>        <span class=\"hljs-type\">int</span> mid = l + r &gt;&gt; <span class=\"hljs-number\">1</span>;<br>        <span class=\"hljs-keyword\">if</span> (val &lt;= mid)&#123;<br>            ch[t][<span class=\"hljs-number\">0</span>] = <span class=\"hljs-built_in\">newnode</span>(ch[t][<span class=\"hljs-number\">0</span>]), t = ch[t][<span class=\"hljs-number\">0</span>], sz[t]++, r = mid;   <br>        &#125;<br>        <span class=\"hljs-keyword\">else</span>&#123;<br>            ch[t][<span class=\"hljs-number\">1</span>] = <span class=\"hljs-built_in\">newnode</span>(ch[t][<span class=\"hljs-number\">1</span>]), t = ch[t][<span class=\"hljs-number\">1</span>], sz[t]++, l = mid + <span class=\"hljs-number\">1</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">get</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> rt, <span class=\"hljs-type\">int</span> l, <span class=\"hljs-type\">int</span> r, <span class=\"hljs-type\">int</span> x)</span></span>&#123;<span class=\"hljs-type\">int</span> cnt = <span class=\"hljs-number\">0</span>;<span class=\"hljs-keyword\">while</span> (l &lt; r)&#123;<span class=\"hljs-type\">int</span> mid = l + r &gt;&gt; <span class=\"hljs-number\">1</span>;<span class=\"hljs-keyword\">if</span> (x &lt;= mid) rt = ch[rt][<span class=\"hljs-number\">0</span>], r = mid;<span class=\"hljs-keyword\">else</span> cnt += sz[ch[rt][<span class=\"hljs-number\">0</span>]], rt = ch[rt][<span class=\"hljs-number\">1</span>], l = mid + <span class=\"hljs-number\">1</span>;&#125;<br>    cnt += sz[rt];<span class=\"hljs-keyword\">return</span> cnt;&#125;<br><br><span class=\"hljs-function\"><span class=\"hljs-type\">long</span> <span class=\"hljs-type\">long</span> <span class=\"hljs-title\">solve</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> v, <span class=\"hljs-type\">int</span> mn, <span class=\"hljs-type\">int</span> mx)</span></span>&#123;<br>    vector&lt;<span class=\"hljs-type\">int</span>&gt; nodes;<span class=\"hljs-type\">static</span> <span class=\"hljs-type\">int</span> w[maxn];<span class=\"hljs-type\">static</span> pair&lt;<span class=\"hljs-type\">int</span>, <span class=\"hljs-type\">int</span>&gt; value[maxn];<br>    <span class=\"hljs-built_in\">get</span>(v, <span class=\"hljs-number\">0</span>, nodes, value, <span class=\"hljs-built_in\">min</span>(mn, v), <span class=\"hljs-built_in\">max</span>(mx, v));<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; nodes.<span class=\"hljs-built_in\">size</span>(); i++) w[i] = nodes[i];<span class=\"hljs-built_in\">sort</span>(w, w + nodes.<span class=\"hljs-built_in\">size</span>());<span class=\"hljs-type\">long</span> <span class=\"hljs-type\">long</span> cnt = <span class=\"hljs-number\">0</span>;<br>    top = <span class=\"hljs-number\">0</span>;<br>    rt[<span class=\"hljs-number\">0</span>] = <span class=\"hljs-number\">0</span>;<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; nodes.<span class=\"hljs-built_in\">size</span>(); i++)<br>     &#123;<span class=\"hljs-keyword\">auto</span> p = value[w[i]];<span class=\"hljs-keyword\">if</span> (i) rt[i] = rt[i - <span class=\"hljs-number\">1</span>];<span class=\"hljs-keyword\">if</span> (w[i] - K1 &lt;= p.first)<br>      <span class=\"hljs-built_in\">ins</span>(rt[i], <span class=\"hljs-number\">1</span>, n, p.second);<span class=\"hljs-keyword\">if</span> (w[i] + K2 &gt;= p.second) &#123;<span class=\"hljs-type\">int</span> nv = p.first + K1;<br>      <span class=\"hljs-comment\">//int pos = min(int(upper_bound(w, w + nodes.size(), nv) - w - 1), i);</span><br>      <span class=\"hljs-type\">int</span> l = <span class=\"hljs-number\">-1</span>, r = nodes.<span class=\"hljs-built_in\">size</span>() - <span class=\"hljs-number\">1</span>;<span class=\"hljs-keyword\">while</span> (l &lt; r) &#123;<span class=\"hljs-type\">int</span> mid = l + r + <span class=\"hljs-number\">1</span> &gt;&gt; <span class=\"hljs-number\">1</span>;<span class=\"hljs-keyword\">if</span> (w[mid] &gt; nv) r = mid - <span class=\"hljs-number\">1</span>; <span class=\"hljs-keyword\">else</span> l = mid; <br>            &#125;<span class=\"hljs-type\">int</span> pos = <span class=\"hljs-built_in\">min</span>(l, i);<span class=\"hljs-keyword\">if</span> (pos &gt;= <span class=\"hljs-number\">0</span>) &#123;<br>                cnt += <span class=\"hljs-built_in\">get</span>(rt[pos], <span class=\"hljs-number\">1</span>, n, w[i] + K2);&#125;&#125;&#125;<span class=\"hljs-keyword\">return</span> cnt;&#125;<span class=\"hljs-type\">long</span> <span class=\"hljs-type\">long</span> ans = <span class=\"hljs-number\">0</span>;<span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">Divide</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> rt)</span></span>&#123;<br>    ans += <span class=\"hljs-built_in\">solve</span>(rt, INF, <span class=\"hljs-number\">0</span>);<br>    vis[rt] = <span class=\"hljs-number\">1</span>;<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> v : g[rt]) <span class=\"hljs-keyword\">if</span> (!vis[v])&#123;<br>    ans -= <span class=\"hljs-built_in\">solve</span>(v, rt, rt);<br>    S = sm[v];<br>    root = <span class=\"hljs-number\">0</span>;<br>    Mx = INF;<span class=\"hljs-built_in\">getrt</span>(v, <span class=\"hljs-number\">0</span>);<span class=\"hljs-built_in\">Divide</span>(root);&#125;&#125;<br>    <br><span class=\"hljs-function\"><span class=\"hljs-type\">int</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">()</span></span>&#123;<br>    n = <span class=\"hljs-built_in\">rd</span>();<br>    K1 = <span class=\"hljs-built_in\">rd</span>();<br>    K2 = <span class=\"hljs-built_in\">rd</span>(); <br>    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">1</span>; i &lt; n; i++)&#123;<span class=\"hljs-type\">int</span> u, v;<br>        u = <span class=\"hljs-built_in\">rd</span>();<br>        v = <span class=\"hljs-built_in\">rd</span>();<br>        g[u].<span class=\"hljs-built_in\">push_back</span>(v);<br>        g[v].<span class=\"hljs-built_in\">push_back</span>(u);&#125;<br>    Mx = INF;<br>    S = n;<span class=\"hljs-built_in\">getrt</span>(<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>);<span class=\"hljs-built_in\">Divide</span>(root);<br>    cout &lt;&lt; ans &lt;&lt; endl;&#125;<br></code></pre></td></tr></table></figure>\n<h2 id=\"54-提交记录\"><a class=\"markdownIt-Anchor\" href=\"#54-提交记录\">#</a> 5.4 提交记录</h2>\n",
            "tags": []
        },
        {
            "id": "http://example.com/games/%E5%8E%9F%E5%9C%A3%E7%AD%96%E5%88%92%E6%A1%88%EF%BC%88%E7%AE%80%E6%98%8E%E7%89%88%EF%BC%89/",
            "url": "http://example.com/games/%E5%8E%9F%E5%9C%A3%E7%AD%96%E5%88%92%E6%A1%88%EF%BC%88%E7%AE%80%E6%98%8E%E7%89%88%EF%BC%89/",
            "title": "原圣策划案",
            "date_published": "2022-11-23T08:11:15.504Z",
            "content_html": "<h1 id=\"游戏简介\"><a class=\"markdownIt-Anchor\" href=\"#游戏简介\">#</a> 游戏简介</h1>\n<p>原圣是一款在三国杀框架下的融合原神反应机制的卡牌对战类游戏，并且其中设计对于原神反应在卡牌方面的融合可以套用于其他卡牌游戏。</p>\n<h1 id=\"元素与反应\"><a class=\"markdownIt-Anchor\" href=\"#元素与反应\">#</a> 元素与反应</h1>\n<h2 id=\"附着\"><a class=\"markdownIt-Anchor\" href=\"#附着\">#</a> 附着</h2>\n<ul>\n<li>相较于传统，我们特意将【判定区】改为【元素区】，通过某种特定规则置于【元素区】的牌称为元素附着，同种附着只存在一种，因此若已存在同种附着，则会以后手附着更换先手附着，后者置入弃牌堆。（除非先手附着为<em><strong>横置附着</strong></em>）</li>\n<li>【横置附着】是一种特殊的附着存在状态，它拥有很高的优先级，不会被同元素附着顶掉。</li>\n<li>牌堆中所有【实体元素杀】都可以直接<em><strong>竖直入</strong></em>其他角色的【元素区】，以这种方式进行的元素附着每回合限一次。</li>\n<li>【元素伤害】与【元素附着】没有必然联系。但是【元素伤害】也可以触发反应</li>\n</ul>\n<h2 id=\"触发反应\"><a class=\"markdownIt-Anchor\" href=\"#触发反应\">#</a> 触发反应</h2>\n<ul>\n<li>当一名角色被元素附着，或受到元素伤害时，根据此时元素区内的元素附着种类，依照反应规则触发反应。</li>\n<li>【元素精通】是所有角色的固有属性，默认为 1 点，上限为 5 点，可以通过角色技能等方式提高或临时提高元素精通点数。</li>\n</ul>\n<h2 id=\"反应规则\"><a class=\"markdownIt-Anchor\" href=\"#反应规则\">#</a> 反应规则</h2>\n<hr>\n<ul>\n<li>【蒸发】\n<ul>\n<li>水 + 火 = 蒸发，反应后所有附着置入弃牌堆。</li>\n<li>触发反应的伤害 * 2。（如果是附着触发蒸发，则只将水火附着置入弃牌堆）</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>【融化】\n<ul>\n<li>冰 + 火 = 融化，反应后所有附着置入弃牌堆。</li>\n<li>触发反应的伤害 * 2。（如果是附着触发融化，则只将冰火附着置入弃牌堆）</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>【感电】\n<ul>\n<li>水 + 雷 = 感电，反应后水元素附着进入弃牌堆。</li>\n<li>造成【元素精通】点雷电伤害，横置雷元素附着，称为【感电附着】。（如果是雷伤触发感电，则只将水附着置入弃牌堆）</li>\n<li>【感电附着】\n<ul>\n<li>角色判定阶段，若拥有此附着，则进行一次判定，若不为【梅花】，跳过本回合摸牌阶段。不论如何，将感电附着置入弃牌堆</li>\n<li>【感电附着】占据雷元素附着位，可以触发除感电外的所有有关雷元素的反应。受到水元素附着时会产生【水雷共存】，此后优先反应水附着。</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>【冻结】\n<ul>\n<li>水 + 冰 = 冻结，反应后水元素附着进入弃牌堆。</li>\n<li>横置冰元素附着，称为【冻结附着】。（如果是冰伤触发感电，则只将水附着置入弃牌堆）</li>\n<li>【冻结附着】\n<ul>\n<li>角色判定阶段，若拥有此附着，则进行一次判定，若不为【红桃】，跳过本回合出牌阶段。不论如何，将冻结附着置入弃牌堆</li>\n<li>【冻结附着】占据冰元素附着位，可以触发除冻结外的所有有关冰元素的反应。受到水元素附着时会产生【水冻共存】，此后优先反应水附着。</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>【超载】\n<ul>\n<li>火 + 雷 = 超载，反应后附着全部进入弃牌堆</li>\n<li>造成【元素精通】*2 的火元素伤害。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>【超导】\n<ul>\n<li>冰 + 雷 = 超导，反应后附着全部进入弃牌堆</li>\n<li>将目标的（【元素精通】+1）张手牌置于角色旁，直到你的回合结束。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>【扩散】\n<ul>\n<li>风 +（水 / 火 / 雷 / 冰）= 扩散，反应后附着全部进入弃牌堆</li>\n<li>造成 2*【元素精通】点对应元素伤害，然后获得一张目标元素区内的<em><strong>竖直</strong></em>元素附着</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>【结晶】\n<ul>\n<li>岩 +（水 / 火 / 雷 / 冰）= 结晶，反应后附着全部进入弃牌堆</li>\n<li>令触发反映者护盾 + 1。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>【原激化】\n<ul>\n<li>雷 + 草 = 原激化，反应后雷元素进入弃牌堆</li>\n<li>横置草元素附着，称为【激化附着】，（如果是草伤触发原激化，则只将雷附着置入弃牌堆）</li>\n<li>【激化附着】\n<ul>\n<li>角色判定阶段，若拥有此附着，则进行一次判定，若不为【方片】，则将激化附着置入弃牌堆。</li>\n<li>【激化附着】占据草元素附着位，可以触发除原激化外的所有有关草元素的反应。受到雷元素附着时会产生【雷激共存】，此后优先反应雷附着。</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>【超激化】\n<ul>\n<li>雷 + 激化 = 超激化，反应后雷元素附着进入弃牌堆。</li>\n<li>触发反应的伤害 * X+【元素精通】（X=【元素精通】&lt;= 3？1：2），激化附着立即进行一次判定。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>【蔓激化】\n<ul>\n<li>草 + 激化 = 蔓激化，反应后草元素附着进入弃牌堆。</li>\n<li>触发反应的伤害 * X+【元素精通】（X=【元素精通】&lt;= 3？1：2），激化附着立即进行一次判定。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>【绽放】\n<ul>\n<li>水 + 草 = 绽放，反应后草元素进入弃牌堆</li>\n<li>横置水元素附着，称为【绽放种附着】，（如果是水伤触发绽放，则只将草附着置入弃牌堆）</li>\n<li>【绽放种附着】\n<ul>\n<li>角色判定阶段，若拥有此附着，则进行一次判定，若不为【黑桃】，则对角色造成 1 点草元素伤害。不论如何，将绽放种附着置入弃牌堆.</li>\n<li>【绽放种附着】可以至多重叠两个，一起进行判定。有关【绽放种附着】的反应也会一起结算。</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>【超绽放】\n<ul>\n<li>雷 + 绽放种 = 超绽放，反应后雷附着进入弃牌堆</li>\n<li>绽放种附着立即进行一次判定，此时判定成功造成的伤害改为【元素精通】*X（X=【元素精通】&lt;= 3？1：2）。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>【烈绽放】\n<ul>\n<li>火 + 绽放种 = 烈绽放，反应后火附着进入弃牌堆</li>\n<li>绽放种附着立即进行一次判定，此时判定成功造成的伤害改为 X（X=【元素精通】&lt;= 3？2：4），目标【周围】角色受到等量伤害。</li>\n</ul>\n</li>\n</ul>\n<hr>\n<ul>\n<li>【燃烧】\n<ul>\n<li>草 + 火 = 燃烧，反应后草附着进入弃牌堆</li>\n<li>横置火元素附着，称为【燃附着】，（如果是火伤触发燃烧，则只将草附着置入弃牌堆）。</li>\n<li>【燃附着】\n<ul>\n<li>角色回合结束时，元素区有【燃附着】的角色依次受到 1 点无来源的火元素伤害。角色判定阶段，若角色拥有【燃附着】，优先将【草附着】置入弃牌堆，若没有【草附着】，再将【燃附着】置入弃牌堆。</li>\n<li>【燃附着】占据火附着位，可以触发除燃烧外的所有有关火元素的反应。受到草元素附着时会产生【补草】效果，草元素与燃元素共存，且草元素优先触发反应。</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h1 id=\"角色设计\"><a class=\"markdownIt-Anchor\" href=\"#角色设计\">#</a> 角色设计</h1>\n<h2 id=\"基础模板\"><a class=\"markdownIt-Anchor\" href=\"#基础模板\">#</a> 基础模板</h2>\n<p>为了拓宽整个伤害的体系范围，我们提高了角色单回合输出期望以及出伤成本，对应了为了平衡游戏，我们同样提高了角色的平均血线，这样能够允许更平滑的伤害梯度与可思考空间。</p>\n<p>为了方便适配原神中繁杂的标记系统，我们特意将坐骑栏更换为【标记区】和【被标记区】。</p>\n<h3 id=\"盾奶模板\"><a class=\"markdownIt-Anchor\" href=\"#盾奶模板\">#</a> 盾奶模板</h3>\n<ul>\n<li>基础血线：10</li>\n<li>技能设计：</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">伤害大致期望</th>\n<th style=\"text-align:left\">对自身</th>\n<th style=\"text-align:left\">对他人</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">回合内</td>\n<td style=\"text-align:left\">-4</td>\n<td style=\"text-align:left\">-2</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">回合外</td>\n<td style=\"text-align:left\">-2</td>\n<td style=\"text-align:left\">0</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"副c模板\"><a class=\"markdownIt-Anchor\" href=\"#副c模板\">#</a> 副 c 模板</h3>\n<ul>\n<li>基础血线：7</li>\n<li>技能设计：</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">伤害大致期望</th>\n<th style=\"text-align:left\">对自身</th>\n<th style=\"text-align:left\">对他人</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">回合内</td>\n<td style=\"text-align:left\">0</td>\n<td style=\"text-align:left\">1</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">回合外</td>\n<td style=\"text-align:left\">-1</td>\n<td style=\"text-align:left\">3</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"主c模板\"><a class=\"markdownIt-Anchor\" href=\"#主c模板\">#</a> 主 c 模板</h3>\n<ul>\n<li>基础血线：7</li>\n<li>技能设计：</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">伤害大致期望</th>\n<th style=\"text-align:left\">对自身</th>\n<th style=\"text-align:left\">对他人</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">回合内</td>\n<td style=\"text-align:left\">0</td>\n<td style=\"text-align:left\">4</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">回合外</td>\n<td style=\"text-align:left\">0</td>\n<td style=\"text-align:left\">0</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"增伤拐模板\"><a class=\"markdownIt-Anchor\" href=\"#增伤拐模板\">#</a> 增伤拐模板</h3>\n<ul>\n<li>基础血线：8</li>\n<li>技能设计：</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">等效伤害期望</th>\n<th style=\"text-align:left\">对自身</th>\n<th style=\"text-align:left\">对他人</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">回合内</td>\n<td style=\"text-align:left\">1</td>\n<td style=\"text-align:left\">-1</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">回合外</td>\n<td style=\"text-align:left\">-1</td>\n<td style=\"text-align:left\">3</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"设计样例初稿\"><a class=\"markdownIt-Anchor\" href=\"#设计样例初稿\">#</a> 设计样例（初稿）</h2>\n<h4 id=\"珊瑚宫心海8血\"><a class=\"markdownIt-Anchor\" href=\"#珊瑚宫心海8血\">#</a> 【珊瑚宫心海】（8 血）</h4>\n<ul>\n<li>出牌阶段限一次，你可以弃置任意张牌，选择 n 名角色（n 为你以此法弃置的牌的数量），执行【幻海月】效果。若你以此法弃置不少于两张非基本牌，你成为【幻海月】效果的额外目标\n<ul>\n<li>【幻海月】：选择以下效果之一：\n<ol>\n<li>回复一点体力并摸一张牌。</li>\n</ol>\n</li>\n</ul>\n</li>\n<li>锁定技，你即将造成伤害时，你立即防止此伤害。若你本回合因此法防止过来源为你的伤害，本回合你产生的回复量翻倍。</li>\n<li>回合开始时，若你满足 a. 为主公；b. 元素区内存在水元素附着；c. 生命值 &lt;=5，你令【幻海月】获得以下选项直到你的回合结束。\n<ol>\n<li>选项 1 的回复值提升至 1.5（最终结果向下取整）。</li>\n<li>增添选项 2：流失一点体力。</li>\n<li>增添选项 3：弃置所有牌，然后摸等量的牌。</li>\n</ol>\n</li>\n</ul>\n<h4 id=\"雷电将军7血\"><a class=\"markdownIt-Anchor\" href=\"#雷电将军7血\">#</a> 【雷电将军】（7 血）</h4>\n<ul>\n<li>每当一名角色通过弃牌发动技能时，你可以将牌堆顶的一张牌置于【标记区】内，称为【愿力】。【愿力】最多存在 10 张。</li>\n<li>每当一名角色造成伤害后，你可以弃置一张【愿力】，若如此做，你摸一张牌。每当一名角色受到伤害后，你可以弃置两张【愿力】，若如此做，你对伤害来源造成一点雷元素伤害。</li>\n<li>出牌阶段限一次，你可以弃置两张【黑桃】锦囊牌，若如此做，你可以对一名攻击范围内的角色造成 4 点雷元素伤害，然后你进入【梦想一心】状态（更换状态会失去原有技能体系，并获得一套新的技能体系）</li>\n<li>【梦想一心】\n<ul>\n<li>锁定技，你的杀均视为雷杀，且无次数限制。</li>\n<li>每当你使用雷杀指定目标后，你可以你可以弃置两张【愿力】令此杀伤害 + 1，然后若此杀被闪抵消，你可以弃置一张【愿力】，然后摸一张牌；若此杀成功造成伤害，你可以弃置一张【愿力】，令一名其他角色摸 X 张牌（X 为此杀造成的伤害数）</li>\n<li>锁定技，回合结束时，你令一名角色摸 4 张牌，然后你退出【梦想一心】状态。</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"迪卢克8血\"><a class=\"markdownIt-Anchor\" href=\"#迪卢克8血\">#</a> 【迪卢克】（8 血）</h4>\n<ul>\n<li>回合开始时，你可以选择任意数量项：1. 跳过出牌阶段 2. 跳过摸牌阶段 3. 跳过判定阶段并流失一点体力 4. 跳过弃牌阶段并弃置两张牌。若如此做，回合结束时，视为使用了一张无距离限制且最多可以指定 n 名角色的火杀（n 为你以此法选择的选项数量）</li>\n<li>每当你使用火杀指定目标后，你可以弃置所有手牌，然后摸两张牌。若你以此法弃置的手牌中非基本牌的数量为：\n<ul>\n<li>一张及以上：此杀不可闪避</li>\n<li>两张及以上：伤害 + 1</li>\n<li>四张及以上：摸四张牌</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"枫原万叶6血\"><a class=\"markdownIt-Anchor\" href=\"#枫原万叶6血\">#</a> 【枫原万叶】（6 血）</h4>\n<ul>\n<li>锁定技，你的【元素精通】+1。</li>\n<li>出牌阶段限一次，你可以弃置任意张牌，然后选择等量的角色，对他们依次造成一点风元素伤害。若如此做，你可以将排队顶等量的牌背面向上置于他们的被标记区内，称为【聚引】。回合开始时，你收回所有【聚引】。</li>\n<li>【聚引】有此标记的角色计算同样有此标记的角色的距离时，始终为 1。</li>\n<li>限定技，出牌阶段，你可以对所有其他角色依次造成一点风元素伤害。若如此做，直到下个你的回合结束，每当一名角色准备阶段时，你都可以将一张手牌竖置于其元素区内。</li>\n</ul>\n<blockquote>\n<p>以上仅为设计样例初稿，更多角色设计及技能设计敬请期待。。。</p>\n</blockquote>\n<h1 id=\"牌堆\"><a class=\"markdownIt-Anchor\" href=\"#牌堆\">#</a> 牌堆</h1>\n<h2 id=\"牌的种类\"><a class=\"markdownIt-Anchor\" href=\"#牌的种类\">#</a> 牌的种类</h2>\n<ol>\n<li>角色牌</li>\n<li>体力牌</li>\n<li>身份牌</li>\n<li>圣遗物牌</li>\n<li>基本牌</li>\n<li>锦囊牌</li>\n</ol>\n<h2 id=\"牌堆的种类\"><a class=\"markdownIt-Anchor\" href=\"#牌堆的种类\">#</a> 牌堆的种类</h2>\n<ol>\n<li>角色牌堆，用于游戏开始抽取角色。</li>\n<li>体力牌堆，用于游戏开始时分配体力</li>\n<li>身份牌堆，用于游戏开始时分配势力卡组以及游戏进行中用于复活行动</li>\n<li>身份弃牌堆，用于存放因死亡而弃置的牌堆。</li>\n<li>圣遗物牌堆，用于游戏进行时获取圣遗物。当此牌堆为空时，洗混圣遗物弃牌堆并加入此牌堆</li>\n<li>圣遗物弃牌堆，用于存放游戏进行时被弃置的圣遗物牌。</li>\n<li>普通牌堆，用于游戏进行时获取手牌。当此牌堆为空时，洗混普通弃牌堆并加入此牌堆。</li>\n<li>普通弃牌堆，用于存放游戏进行时被使用，打出或弃置的手牌。</li>\n</ol>\n<h1 id=\"游戏流程\"><a class=\"markdownIt-Anchor\" href=\"#游戏流程\">#</a> 游戏流程</h1>\n<h2 id=\"准备游戏\"><a class=\"markdownIt-Anchor\" href=\"#准备游戏\">#</a> 准备游戏</h2>\n<h3 id=\"势力与身份\"><a class=\"markdownIt-Anchor\" href=\"#势力与身份\">#</a> 势力与身份</h3>\n<ol>\n<li>游戏中共存在八种不同势力，分别为蒙德，璃月，稻妻，须弥，枫丹，纳塔，至冬和坎瑞亚。</li>\n<li>前七种势力分别带有一张主公和两张眷属，共计三张身份卡。坎瑞亚只有主公身份卡。</li>\n</ol>\n<h3 id=\"分配势力\"><a class=\"markdownIt-Anchor\" href=\"#分配势力\">#</a> 分配势力</h3>\n<ol>\n<li>玩家 5~10 人，根据游戏人数决定势力卡组。</li>\n<li>每种势力必须存在一个主公，可以不存在眷属。</li>\n<li>起始者从没有眷属的主公中自行选择，但应优先选择坎瑞亚（如果势力卡组存在这个势力的话）</li>\n<li>开始游戏前洗混势力卡并分发（此过程不展示势力卡）</li>\n</ol>\n<h2 id=\"进行游戏\"><a class=\"markdownIt-Anchor\" href=\"#进行游戏\">#</a> 进行游戏</h2>\n<h3 id=\"开始游戏\"><a class=\"markdownIt-Anchor\" href=\"#开始游戏\">#</a> 开始游戏</h3>\n<ol>\n<li>玩家抽取多张角色卡并选择一张（此过程不展示角色卡）。</li>\n<li>各势力主公亮出角色及势力卡，无眷属主公增加一点体力上限并回复一点体力。</li>\n<li>其他玩家亮出角色卡，依照规则从起始者开始从普通牌堆摸 4 张牌为起始手牌，然后依次逆时针执行角色回合循环。</li>\n<li>当场上只剩一种势力的主公时，该势力获胜，游戏结束。</li>\n</ol>\n<h3 id=\"回合循环\"><a class=\"markdownIt-Anchor\" href=\"#回合循环\">#</a> 回合循环</h3>\n<ol>\n<li>回合开始前 —— 判断是否翻面。</li>\n<li>回合开始</li>\n<li>准备阶段</li>\n<li>判定阶段 —— 进行元素区内各种附着的结算，结算顺序为先附着者后结算。</li>\n<li>摸牌阶段 —— 摸牌总数为 3，玩家自行从分配正常牌堆与圣遗物牌堆中的摸牌数量。</li>\n<li>出牌阶段</li>\n<li>弃牌阶段 —— 将手牌弃到手牌上限（所有角色的初始手牌上限均为 4，体力值减少不影响手牌上限）</li>\n<li>结束阶段</li>\n<li>回合结束</li>\n<li>回合结束后 —— 询问是否亮出身份</li>\n</ol>\n<h3 id=\"濒死与死亡\"><a class=\"markdownIt-Anchor\" href=\"#濒死与死亡\">#</a> 濒死与死亡</h3>\n<ol>\n<li>一名角色体力为 0 或更少时进入濒死阶段，从濒死角色开始依次求桃。只要有角色选择使用桃，濒死角色将立即使体力值回复至 1 点。（不论其濒死时是否体力值小于 0）</li>\n<li>若无人选择使用桃，则角色死亡。死亡后必须明置身份。然后将身份牌置入身份牌弃牌堆。</li>\n<li>玩家死亡后，可以在从未加入游戏，且没有选择过的势力中选择一个眷属身份重新复活加入游戏。若没有满足条件的身份，则玩家无法复活。</li>\n<li>复活后，角色所有状态与圣遗物重置，并将体力值恢复至与全场最低的体力值等量，然后继续游戏。若你死亡时正好是你的回合，跳过你的这个回合。</li>\n</ol>\n<blockquote>\n<p>注意，死亡后，若选择复活，将代表你无法胜利。但你仍然可以加入游戏，帮助你想要帮助的势力。或者攻击你痛恨的势力。复活是有次数限制的，参与人数越多，势力卡组的势力种类越多，每个玩家分配到的复活机会就越少。</p>\n</blockquote>\n<h3 id=\"亮出身份与充能\"><a class=\"markdownIt-Anchor\" href=\"#亮出身份与充能\">#</a> 亮出身份与充能</h3>\n<ol>\n<li>\n<p>每名角色回合结束后，若其身份仍然暗置，则其可以选择：</p>\n<ol>\n<li>亮出身份，然后摸 X 张牌（X 为场上明置的眷属数 + 1）</li>\n<li>从身份弃牌堆中选择一张无眷属势力的主公身份牌，与自己手中的牌替换，然后明置（自立门户）</li>\n</ol>\n</li>\n<li>\n<p>一名角色若成功杀死其他势力不同的角色时，可以选择：</p>\n<ol>\n<li>摸三张牌</li>\n<li>获得该角色的手牌或圣遗物</li>\n<li>重置自己限定技（视为未使用过）</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"胜利条件\"><a class=\"markdownIt-Anchor\" href=\"#胜利条件\">#</a> 胜利条件</h2>\n<p>当场上只存在一种势力的主公时，该势力获胜。</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/computer-science/c/%E5%BF%AB%E6%8E%92/",
            "url": "http://example.com/computer-science/c/%E5%BF%AB%E6%8E%92/",
            "title": "快速排序",
            "date_published": "2022-11-15T01:54:25.903Z",
            "content_html": "<h1 id=\"快速排序\"><a class=\"markdownIt-Anchor\" href=\"#快速排序\">#</a> 快速排序</h1>\n<p>c++ 的 stl 库里给出的 sort () 是典型的快速排序，相较于一般的排序方法，快速排序能够优化时间。</p>\n<h2 id=\"原理与步骤\"><a class=\"markdownIt-Anchor\" href=\"#原理与步骤\">#</a> 原理与步骤</h2>\n<p>快排的原理很常见，他的原理和步骤具体如下：</p>\n<ol>\n<li>\n<p>选取一组无序数列中间某一项（随机的一项），命名为 flag，从数列的最左端和最右端同时遍历（后文将左端索引称为 i，右端称为 j），直到左端和右端都找到一个 “不正常” 项，即左端大于 flag 的不正常项和右端小于 flag 的不正常项。</p>\n<blockquote>\n<p>为了防止有歧义特此说明，找不正常项的过程是顺序进行的两个循环，互相不受影响。</p>\n</blockquote>\n</li>\n<li>\n<p>快速排序所作的具体的行动就是让 flag 两边的所有项都 “正常”。这样做造成的结果是，左边的数字跨过 flag 到右边，或者把右边的数跨过 flag 到左边都一定是错误的，flag 在这个时候起到了将数列分界的作用。我们对分界后的子数列同样正常化他们 —— 最终只剩一个或两个数字的时候，正常化就可以完全等效为序列化。这可以用递归实现。</p>\n</li>\n<li>\n<p>正常化 flag 两边的序列最简单的方法就是交换 1 所找到的不正常项，强制让 flag 两边的正常化</p>\n</li>\n</ol>\n<h2 id=\"代码实现\"><a class=\"markdownIt-Anchor\" href=\"#代码实现\">#</a> 代码实现</h2>\n<p>上述的原理只是为了方便理解，实际上有许多逻辑漏洞。修理这些逻辑漏洞会让理解变得困难，所以放到代码部分讲解。</p>\n<p>下面给出了一个数列 3 4 5 2 6 9 8 5，以<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>（5）为 flag 开始快排。读者跟着上面的思路找到 i 和 j 的不正常项后会注意到他们的位置是：i=<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>4</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>(6),j=<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mn>3</mn></msub></mrow><annotation encoding=\"application/x-tex\">a_3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> (2),i 超过了 j。</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/computer-science/c/%E6%A8%A1%E6%9D%BF/",
            "url": "http://example.com/computer-science/c/%E6%A8%A1%E6%9D%BF/",
            "title": "位运算",
            "date_published": "2022-11-15T01:54:05.608Z",
            "content_html": "",
            "tags": []
        },
        {
            "id": "http://example.com/computer-science/c/%E5%BF%AB%E9%80%9F%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2/",
            "url": "http://example.com/computer-science/c/%E5%BF%AB%E9%80%9F%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2/",
            "title": "快速傅里叶变换",
            "date_published": "2022-11-09T00:10:05.111Z",
            "content_html": "<h1 id=\"快速傅里叶变换\"><a class=\"markdownIt-Anchor\" href=\"#快速傅里叶变换\">#</a> 快速傅里叶变换</h1>\n<p>【注】菜鸡刚从 b 站大佬搬运的 FFT 科普里出来，所以写的东西可能会 “似曾相识”（真的有人看到这句话吗）</p>\n<h2 id=\"前言\"><a class=\"markdownIt-Anchor\" href=\"#前言\">#</a> 前言</h2>\n<h2 id=\"提出问题\"><a class=\"markdownIt-Anchor\" href=\"#提出问题\">#</a> 提出问题</h2>\n<p>​\t现在我们想要处理这样的问题：给定两个多项式 A (x) 和 B (x), 求这样的 C (x) 满足：</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>A</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>×</mo><mi>B</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">A(x)\\times B(x)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span></span></p>\n<p>​\t很简单的问题，就和题面一样直白。这里的 A (x) 和 B (x) 都是已知多项式，我们只需要用中学生都学会的乘法分配律就可以轻松解决。</p>\n<p>​\t然而，这样处理的问题在于，当 A (x) 和 B (x) 的阶数非常大的时候，这种算法无疑会浪费很多时间。让我们换一种思路解决这样的问题。</p>\n<h2 id=\"多项式的点表示法\"><a class=\"markdownIt-Anchor\" href=\"#多项式的点表示法\">#</a> 多项式的点表示法</h2>\n<p>​\t对于一个 n-1 阶多项式，我们只需要 n 阶个不同点就可以精确的给出，就像两点确定一条直线，三点确定一条抛物线一般。这个结论的证明非常简单易懂，你只需要证明下面这个线性方程有解即可</p>\n<blockquote>\n<p>（P (x) 是系数为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>p</mi><mn>0</mn></msub><mo separator=\"true\">,</mo><msub><mi>p</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>p</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mo>⋯</mo><mtext> </mtext><mo separator=\"true\">,</mo><msub><mi>p</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub></mrow><annotation encoding=\"application/x-tex\">p_0,p_1,p_2,\\cdots,p_{n-1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.638891em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span></span></span></span> 的多项式，找到了 n 个点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mn>0</mn></msub><mo separator=\"true\">,</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mo>⋯</mo><mtext> </mtext><mo separator=\"true\">,</mo><msub><mi>x</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub></mrow><annotation encoding=\"application/x-tex\">x_0,x_1,x_2,\\cdots,x_{n-1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.638891em;vertical-align:-0.208331em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span></span></span></span>）</p>\n</blockquote>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mrow><mo fence=\"true\">[</mo><mtable rowspacing=\"0.15999999999999992em\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mn>0</mn></msub><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mo lspace=\"0em\" rspace=\"0em\">⋯</mo></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mrow><mi>p</mi><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mn>2</mn></msub><mo stretchy=\"false\">)</mo></mrow></mstyle></mtd></mtr></mtable><mo fence=\"true\">]</mo></mrow><mo>=</mo><mrow><mo fence=\"true\">[</mo><mtable rowspacing=\"0.15999999999999992em\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>x</mi><mn>0</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msubsup><mi>x</mi><mn>0</mn><mn>2</mn></msubsup></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mo lspace=\"0em\" rspace=\"0em\">…</mo></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msubsup><mi>x</mi><mn>0</mn><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msubsup></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>x</mi><mn>1</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msubsup><mi>x</mi><mn>1</mn><mn>2</mn></msubsup></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mo lspace=\"0em\" rspace=\"0em\">…</mo></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msubsup><mi>x</mi><mn>1</mn><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msubsup></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>x</mi><mn>2</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msubsup><mi>x</mi><mn>2</mn><mn>2</mn></msubsup></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mo lspace=\"0em\" rspace=\"0em\">…</mo></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msubsup><mi>x</mi><mn>2</mn><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msubsup></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mo lspace=\"0em\" rspace=\"0em\">⋯</mo></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mo lspace=\"0em\" rspace=\"0em\">⋯</mo></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mo lspace=\"0em\" rspace=\"0em\">⋯</mo></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mo lspace=\"0em\" rspace=\"0em\">⋯</mo></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mo lspace=\"0em\" rspace=\"0em\">⋯</mo></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>x</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msubsup><mi>x</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow><mn>2</mn></msubsup></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mo lspace=\"0em\" rspace=\"0em\">…</mo></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msubsup><mi>x</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msubsup></mstyle></mtd></mtr></mtable><mo fence=\"true\">]</mo></mrow><mrow><mo fence=\"true\">[</mo><mtable rowspacing=\"0.15999999999999992em\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>p</mi><mn>0</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>p</mi><mn>1</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>p</mi><mn>2</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mo lspace=\"0em\" rspace=\"0em\">⋯</mo></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><msub><mi>p</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub></mstyle></mtd></mtr></mtable><mo fence=\"true\">]</mo></mrow></mrow><annotation encoding=\"application/x-tex\">\\left[\\begin{matrix}P(x_0)\\\\P(x_1)\\\\P(x_2)\\\\\\cdots \\\\p(x_2)\\end{matrix} \\right]=\\left[\\begin{matrix}1 &amp; x_0 &amp;x_0^2 &amp;\\ldots &amp; x_0^{n-1}\\\\1 &amp; x_1 &amp;x_1^2 &amp;\\ldots &amp; x_1^{n-1}\\\\1 &amp; x_2 &amp;x_2^2 &amp;\\ldots &amp; x_2^{n-1}\\\\\\cdots&amp; \\cdots&amp;\\cdots&amp;\\cdots&amp;\\cdots\\\\1 &amp; x_{n-1} &amp;x_{n-1}^2 &amp;\\ldots &amp; x_{n-1}^{n-1}\\\\\\end{matrix} \\right]\\left[\\begin{matrix}p_0\\\\p_1\\\\p_2\\\\\\cdots \\\\p_{n-1}\\end{matrix} \\right]\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:6.00503em;vertical-align:-2.75004em;\"></span><span class=\"minner\"><span class=\"mopen\"><span class=\"delimsizing mult\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.2549900000000003em;\"><span style=\"top:-1.0499800000000006em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎣</span></span></span><span style=\"top:-2.1999800000000005em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎢</span></span></span><span style=\"top:-2.79598em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎢</span></span></span><span style=\"top:-3.39198em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎢</span></span></span><span style=\"top:-3.9879800000000003em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎢</span></span></span><span style=\"top:-4.0139700000000005em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎢</span></span></span><span style=\"top:-5.25499em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎡</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.75004em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.2500000000000004em;\"><span style=\"top:-5.410000000000001em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span><span style=\"top:-4.21em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.01em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span><span style=\"top:-1.8099999999999998em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"minner\">⋯</span></span></span><span style=\"top:-0.6099999999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.7500000000000004em;\"><span></span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"delimsizing mult\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.2549900000000003em;\"><span style=\"top:-1.0499800000000006em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎦</span></span></span><span style=\"top:-2.1999800000000005em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎥</span></span></span><span style=\"top:-2.79598em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎥</span></span></span><span style=\"top:-3.39198em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎥</span></span></span><span style=\"top:-3.9879800000000003em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎥</span></span></span><span style=\"top:-4.0139700000000005em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎥</span></span></span><span style=\"top:-5.25499em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎤</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.75004em;\"><span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:6.0569560000000005em;vertical-align:-2.7784780000000002em;\"></span><span class=\"minner\"><span class=\"mopen\"><span class=\"delimsizing mult\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.2549900000000003em;\"><span style=\"top:-1.0499800000000006em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎣</span></span></span><span style=\"top:-2.1999800000000005em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎢</span></span></span><span style=\"top:-2.79598em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎢</span></span></span><span style=\"top:-3.39198em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎢</span></span></span><span style=\"top:-3.9879800000000003em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎢</span></span></span><span style=\"top:-4.0139700000000005em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎢</span></span></span><span style=\"top:-5.25499em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎡</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.75004em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.2784780000000002em;\"><span style=\"top:-5.424239000000001em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span><span style=\"top:-4.21em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span><span style=\"top:-2.995761em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span><span style=\"top:-1.795761em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"minner\">⋯</span></span></span><span style=\"top:-0.5815219999999999em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.7784780000000002em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.2784780000000002em;\"><span style=\"top:-5.424239000000001em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-4.21em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-2.995761em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-1.795761em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"minner\">⋯</span></span></span><span style=\"top:-0.5815219999999999em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.7784780000000002em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.2784780000000002em;\"><span style=\"top:-5.424239000000001em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-2.4518920000000004em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24810799999999997em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-4.21em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-2.4518920000000004em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24810799999999997em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-2.995761em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-2.4518920000000004em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24810799999999997em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-1.795761em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"minner\">⋯</span></span></span><span style=\"top:-0.5815219999999999em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999998em;\"><span style=\"top:-2.451892em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30643899999999996em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.7784780000000002em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.2784780000000002em;\"><span style=\"top:-5.424239000000001em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"minner\">…</span></span></span><span style=\"top:-4.21em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"minner\">…</span></span></span><span style=\"top:-2.995761em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"minner\">…</span></span></span><span style=\"top:-1.795761em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"minner\">⋯</span></span></span><span style=\"top:-0.5815219999999999em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"minner\">…</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.7784780000000002em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.2784780000000002em;\"><span style=\"top:-5.424239000000001em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.854239em;\"><span style=\"top:-2.433692em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span><span style=\"top:-3.1031310000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.266308em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-4.21em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.854239em;\"><span style=\"top:-2.433692em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span><span style=\"top:-3.1031310000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.266308em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-2.995761em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.854239em;\"><span style=\"top:-2.433692em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span><span style=\"top:-3.1031310000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.266308em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-1.795761em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"minner\">⋯</span></span></span><span style=\"top:-0.5815219999999999em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.854239em;\"><span style=\"top:-2.433692em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.1031310000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.324639em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.7784780000000002em;\"><span></span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"delimsizing mult\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.2549900000000003em;\"><span style=\"top:-1.0499800000000006em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎦</span></span></span><span style=\"top:-2.1999800000000005em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎥</span></span></span><span style=\"top:-2.79598em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎥</span></span></span><span style=\"top:-3.39198em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎥</span></span></span><span style=\"top:-3.9879800000000003em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎥</span></span></span><span style=\"top:-4.0139700000000005em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎥</span></span></span><span style=\"top:-5.25499em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎤</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.75004em;\"><span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\"><span class=\"mopen\"><span class=\"delimsizing mult\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.2549900000000003em;\"><span style=\"top:-1.0499800000000006em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎣</span></span></span><span style=\"top:-2.1999800000000005em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎢</span></span></span><span style=\"top:-2.79598em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎢</span></span></span><span style=\"top:-3.39198em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎢</span></span></span><span style=\"top:-3.9879800000000003em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎢</span></span></span><span style=\"top:-4.0139700000000005em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎢</span></span></span><span style=\"top:-5.25499em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎡</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.75004em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.2500000000000004em;\"><span style=\"top:-5.410000000000001em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-4.21em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-3.01em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span><span style=\"top:-1.8099999999999998em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"minner\">⋯</span></span></span><span style=\"top:-0.6099999999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.7500000000000004em;\"><span></span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"delimsizing mult\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:3.2549900000000003em;\"><span style=\"top:-1.0499800000000006em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎦</span></span></span><span style=\"top:-2.1999800000000005em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎥</span></span></span><span style=\"top:-2.79598em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎥</span></span></span><span style=\"top:-3.39198em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎥</span></span></span><span style=\"top:-3.9879800000000003em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎥</span></span></span><span style=\"top:-4.0139700000000005em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎥</span></span></span><span style=\"top:-5.25499em;\"><span class=\"pstrut\" style=\"height:3.1550000000000002em;\"></span><span class=\"delimsizinginner delim-size4\"><span>⎤</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:2.75004em;\"><span></span></span></span></span></span></span></span></span></span></span></span></p>\n<p>​\t系数矩阵是一个范德蒙德矩阵，他很显然是一个满秩矩阵 —— 只要保证任意两个 x 不相等，这说明上述的线性方程组有唯一解，定理得证。</p>\n<p>​\t这代表着我们不需要做繁琐的多项式展开，只需在 A (x) 和 B (x) 上找到 n 个互不相等的点，将这些点的纵坐标相乘，获得表达 C (x) 的这一组点，最后通过求解上面的线性方程组，就能得到 C (x) 的具体而又精确的表达式。</p>\n<p>​\t这真的足够简便吗？并非如此。你会发现当你试图进行第一步：找这样的点的时候，你将面临一个复杂的计算。这样的计算还要重复（n+1）次，从时间复杂的上来看，你似乎在南辕北辙。</p>\n<h2 id=\"正负对取点\"><a class=\"markdownIt-Anchor\" href=\"#正负对取点\">#</a> 正负对取点</h2>\n<p>​\t简单的随意去点似乎不能让我们事半功倍，但这正是 FFT 算法的精妙之一。FFT 用到的取点方法能够实打实地降低计算的复杂程度。</p>\n<p>​\t假设<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>P</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msup><mi>x</mi><mn>3</mn></msup></mrow><annotation encoding=\"application/x-tex\">P(x)=x^{3}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span></span></span></span>, 你现在想取四个点，不妨就令<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo>=</mo><mn>1</mn><mo separator=\"true\">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo>=</mo><mo>−</mo><mn>1</mn><mo separator=\"true\">,</mo><msub><mi>x</mi><mn>3</mn></msub><mo>=</mo><mn>2</mn><mo separator=\"true\">,</mo><msub><mi>x</mi><mn>4</mn></msub><mo>=</mo><mo>−</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">x_{1}=1,x_{2}=-1,x_{3}=2,x_{4}=-2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">3</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8388800000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">4</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.72777em;vertical-align:-0.08333em;\"></span><span class=\"mord\">−</span><span class=\"mord\">2</span></span></span></span>, 这样当你把 1 或者 2 带入计算的同时，你也得知了 - 1 和 - 2 所对应的函数值.</p>\n<p>​\t根据函数的奇偶性可以 “咔！” 的一下将工作量减半。这是个投机倒把的小技巧，似乎只能在这样特别好看的函数上才能落实到位…</p>\n",
            "tags": []
        },
        {
            "id": "http://example.com/computer-science/c/%E9%AB%98%E7%B2%BE%E5%BA%A6/",
            "url": "http://example.com/computer-science/c/%E9%AB%98%E7%B2%BE%E5%BA%A6/",
            "title": "高精度算法",
            "date_published": "2022-11-05T09:17:35.628Z",
            "content_html": "<h1 id=\"高精度\"><a class=\"markdownIt-Anchor\" href=\"#高精度\">#</a> 高精度</h1>\n<h2 id=\"概念\"><a class=\"markdownIt-Anchor\" href=\"#概念\">#</a> 概念</h2>\n<p>​\t高精度是用来算超级大的数字们的。。我们知道很多编译器都只支持最大用十几个字节来存储一个数字。。这明显已经足够处理日常生活中的数字了，但总有些题目涉及的运算 —— 例如阶乘或者指数运算之类的，就连十几个字节也会被撑爆掉（足够变态不是吗）我们只能通过一些繁杂的手法处理这种神经病一般的数字。。这种算法统称高精度</p>\n<h2 id=\"数据的存储与调用\"><a class=\"markdownIt-Anchor\" href=\"#数据的存储与调用\">#</a> 数据的存储与调用</h2>\n<p>​\t高精度要求你所能存储的数尽可能的大，不妨直接开一个数组来存这样的大麻烦。数组中每一项只存储这个数字的一位，这样的好处是就算数字达到了 10000 位之大他都能塞得进数组里。</p>\n<p>​\t为了方便让这个家伙进位，我们应该让他倒着在数组里躺着。自然在调用的时候也得倒着来</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs c++\"><br><span class=\"hljs-comment\">//高精度整数定义</span><br><span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">BigInt</span> &#123;<br>\t<span class=\"hljs-type\">int</span> len = <span class=\"hljs-number\">0</span>;<span class=\"hljs-comment\">//长度</span><br>\t<span class=\"hljs-type\">int</span> num[MAX] = &#123;<span class=\"hljs-number\">0</span>&#125;;<span class=\"hljs-comment\">//具体的数字</span><br><br>\t<span class=\"hljs-comment\">//初始化，将一个整数转化为高精度</span><br>\t<span class=\"hljs-built_in\">BigInt</span>(<span class=\"hljs-type\">int</span> x = <span class=\"hljs-number\">0</span>) <br>    &#123;<br>\t\t<span class=\"hljs-built_in\">memset</span>(num, <span class=\"hljs-number\">0</span>, <span class=\"hljs-built_in\">sizeof</span>(num));<br>\t\t<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">1</span>; x; i++, len++)<br>        &#123;<br>\t\t\tnum[i] = x % <span class=\"hljs-number\">10</span>;<br>\t\t\tx /= <span class=\"hljs-number\">10</span>;<br>        &#125;<br>    &#125;<br><br>\t<span class=\"hljs-comment\">//重载[]，让他直接访问BigInt的数据</span><br>\t<span class=\"hljs-type\">int</span> &amp;<span class=\"hljs-keyword\">operator</span>[](<span class=\"hljs-type\">int</span> i)<br>    &#123;<br>\t\t<span class=\"hljs-keyword\">return</span> num[i];<br>    &#125;<br><br>\t<span class=\"hljs-comment\">//进位与更新长度</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">jinwei</span><span class=\"hljs-params\">()</span></span><br><span class=\"hljs-function\">    </span>&#123;<br>\t\t<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">1</span>; i &lt;= MAX; i++)<br>        &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (num[i] &gt; <span class=\"hljs-number\">9</span>)<br>            &#123;<br>\t\t\t\tnum[i + <span class=\"hljs-number\">1</span>] += num[i] / <span class=\"hljs-number\">10</span>;<br>\t\t\t\tnum[i] %= <span class=\"hljs-number\">10</span>;<br>\t\t\t\tlen++;<br>            &#125;<br>        &#125;<br>\t\t<span class=\"hljs-keyword\">while</span> (!num[len])<br>        &#123;<br>\t\t\tlen--;<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">//输入</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">scan</span><span class=\"hljs-params\">(string temp)</span></span><br><span class=\"hljs-function\">    </span>&#123;<br>\t\tcin &gt;&gt; temp;<br>\t\tlen = temp.<span class=\"hljs-built_in\">length</span>();<br>\t\t<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">0</span>; i &lt; len; i++)<br>        &#123;<br>\t\t\tnum[len - i] = temp[i] - <span class=\"hljs-string\">&#x27;0&#x27;</span>;<br>\t\t&#125;<br>\t&#125;<br><br>\t<span class=\"hljs-comment\">//输出</span><br>\t<span class=\"hljs-function\"><span class=\"hljs-type\">void</span> <span class=\"hljs-title\">print</span><span class=\"hljs-params\">()</span></span><br><span class=\"hljs-function\">    </span>&#123;<br>\t\t<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = len; i &gt;= <span class=\"hljs-number\">1</span>; i--) <br>        &#123;<br>\t\t\tcout &lt;&lt; num[i];<br>\t\t&#125;<br>\t&#125;<br>&#125;;<br></code></pre></td></tr></table></figure>\n<h2 id=\"赋值\"><a class=\"markdownIt-Anchor\" href=\"#赋值\">#</a> 赋值</h2>\n<p>重载 =，让 = 右边的 BigInt 赋值给左边。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs c++\"><br><span class=\"hljs-type\">void</span> <span class=\"hljs-keyword\">operator</span>= (BigInt&amp; left,BigInt right)<br>&#123;<br>    left.len=right.len;<br>    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-type\">int</span> i=<span class=\"hljs-number\">1</span>;i&lt;=right.len;i++)<br>    &#123;<br>        left[i]=right[i];<br>    &#125;<br>    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-type\">int</span> i=right.len;i&lt;=left.len;i++)<br>    &#123;<br>        left[i]=<span class=\"hljs-number\">0</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n<h2 id=\"加法\"><a class=\"markdownIt-Anchor\" href=\"#加法\">#</a> 加法</h2>\n<p>​\t高精度的加法分为两种情况，与普通数字相加或与同样的高精度相加。。但是二者的技术细节大致相等</p>\n<h3 id=\"与普通数字相加\"><a class=\"markdownIt-Anchor\" href=\"#与普通数字相加\">#</a> 与普通数字相加</h3>\n<p>​\t我们的高精度数字是一个数组，这意味着一个 “位” 上不止能存 1~9。。如果只是普通的数字，你大可以将他放在高精度的末尾，然后进行再一个个进位。。当然，我跟喜欢再进位的过程中更新一下高精度的长度。</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs c++\"><br>BigInt <span class=\"hljs-keyword\">operator</span>+ (BigInt a,<span class=\"hljs-type\">int</span> b)<br>&#123;<br>    BigInt r;<br>    r=a;<br>    r.len=a.len+<span class=\"hljs-number\">1</span>;<br>    r[<span class=\"hljs-number\">1</span>]+=n;<br>    r.<span class=\"hljs-built_in\">jinwei</span>();<br>    <span class=\"hljs-keyword\">return</span> r;<br>&#125;<br></code></pre></td></tr></table></figure>\n<h3 id=\"与高精度相加\"><a class=\"markdownIt-Anchor\" href=\"#与高精度相加\">#</a> 与高精度相加</h3>\n<p>​\t与高精度相加似乎与普通数字相加的区别不大 —— 你只需将加这个动作在每个位数上都来上一遍，最后进行进位即可。。</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cpp\"><br>BigInt <span class=\"hljs-keyword\">operator</span>+ (BigInt a, BigInt b)<br>&#123;<br>\tBigInt r;<br>\t<span class=\"hljs-type\">int</span> l = a.len &gt; b.len ? a.len : b.len;<br>\tl += <span class=\"hljs-number\">1</span>;<br>\tr.len = l;<br>\t<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">1</span>; i &lt;= l; i++)<br>    &#123;<br>\t\tr[i] = a[i] + b[i];<br>\t&#125;<br>\tr.<span class=\"hljs-built_in\">jinwei</span>();<br>\t<span class=\"hljs-keyword\">return</span> r;<br>&#125;<br></code></pre></td></tr></table></figure>\n<h2 id=\"乘法\"><a class=\"markdownIt-Anchor\" href=\"#乘法\">#</a> 乘法</h2>\n<h3 id=\"与普通数字相乘\"><a class=\"markdownIt-Anchor\" href=\"#与普通数字相乘\">#</a> 与普通数字相乘</h3>\n<p>​\t与普通数字相乘即为每个数字乘上一个 n，不再赘述。。</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cpp\"><br><span class=\"hljs-comment\">//高乘单</span><br>BigInt <span class=\"hljs-keyword\">operator</span>* (BigInt a, <span class=\"hljs-type\">int</span> n)<br>&#123;<br>\tBigInt r;<br>\t<span class=\"hljs-type\">int</span> l = a.len;<br>\tr.len = l;<br>\t<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">1</span>; i &lt;= a.len; i++)<br>    &#123;<br>\t\tr[i] = a[i] * n;<br>\t&#125;<br>\tr.<span class=\"hljs-built_in\">jinwei</span>();<br>\t<span class=\"hljs-keyword\">return</span> r;<br>&#125;<br></code></pre></td></tr></table></figure>\n<h3 id=\"与高精度相乘\"><a class=\"markdownIt-Anchor\" href=\"#与高精度相乘\">#</a> 与高精度相乘</h3>\n<p>与高精度相乘时，回忆竖式乘法，可以等效为与多个普通数字相乘之后再错位相加。错位相加这一步刚好可以用 BigInt 的 jinwei () 等效实现，代码如下</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs cpp\"><br><span class=\"hljs-comment\">//高乘高</span><br>BigInt <span class=\"hljs-keyword\">operator</span>* (BigInt a, BigInt b)<br>&#123;<br>\tBigInt r;<br>\tr.len = a.len + b.len;<br>\t<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">1</span>; i &lt;= a.len; i++)<br>    &#123;<br>\t\t<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> j = <span class=\"hljs-number\">1</span>; j &lt;= b.len; j++)<br>        &#123;<br>\t\t\tr[i + j - <span class=\"hljs-number\">1</span>] += a[i] * b[j];<br>\t\t&#125;<br>\t&#125;<br>\tr.<span class=\"hljs-built_in\">jinwei</span>();<br>\t<span class=\"hljs-keyword\">return</span> r;<br>&#125;<br></code></pre></td></tr></table></figure>\n",
            "tags": []
        },
        {
            "id": "http://example.com/computer-science/c/%E4%BD%8D%E8%BF%90%E7%AE%97/",
            "url": "http://example.com/computer-science/c/%E4%BD%8D%E8%BF%90%E7%AE%97/",
            "title": "位运算",
            "date_published": "2022-11-05T08:53:18.165Z",
            "content_html": "<h1 id=\"位运算\"><a class=\"markdownIt-Anchor\" href=\"#位运算\">#</a> 位运算</h1>\n<p>​\t位运算是计算机对于各种数字的本质处理方式，掌握位运算不仅有利于处理一些关于二进制问题的简便方法，同时也有利于对于某些复杂运算的快速求解。。（绝对不是为了装 b）</p>\n<h2 id=\"求一个整数转化为二进制时1的个数\"><a class=\"markdownIt-Anchor\" href=\"#求一个整数转化为二进制时1的个数\">#</a> 求一个整数转化为二进制时 1 的个数</h2>\n<h3 id=\"方法\"><a class=\"markdownIt-Anchor\" href=\"#方法\">#</a> 方法</h3>\n<p>​\t不废话，上代码</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs c++\"><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span><span class=\"hljs-string\">&lt;iostream&gt;</span></span><br><span class=\"hljs-keyword\">using</span> <span class=\"hljs-keyword\">namespace</span> std;<br><br><span class=\"hljs-type\">int</span> x,count=<span class=\"hljs-number\">0</span>;<br>cin&gt;&gt;x;<br><span class=\"hljs-keyword\">while</span>(x)<br>&#123;<br>\tx&amp;=(x<span class=\"hljs-number\">-1</span>);<br>\tcount++;<br>&#125;<br>cout&lt;&lt;count;<br></code></pre></td></tr></table></figure>\n<p>这个代码的原理在于：</p>\n<ol>\n<li>对一个数减一在二进制上所产生的变化是：从低位像高位找到第一个 1，非从此之后的数。</li>\n<li>x 与（x-1）相当于将上述所有产生变化的数归 0，如此以来我们成功 “消除” 了一个 1。。</li>\n<li>继续消除，直到全为 0</li>\n</ol>\n",
            "tags": []
        },
        {
            "id": "http://example.com/computer-science/c/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/",
            "url": "http://example.com/computer-science/c/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/",
            "title": "动态规划",
            "date_published": "2022-10-24T10:18:10.587Z",
            "content_html": "<h1 id=\"动态规划\"><a class=\"markdownIt-Anchor\" href=\"#动态规划\">#</a> 动态规划</h1>\n<h2 id=\"入门\"><a class=\"markdownIt-Anchor\" href=\"#入门\">#</a> 入门</h2>\n<h3 id=\"概念\"><a class=\"markdownIt-Anchor\" href=\"#概念\">#</a> 概念</h3>\n<p>​\t动态规划是我们运用算法解决问题的一种方式，我们可以将它简单的理解成：找递推式。有时我们碰到一个非常复杂的问题，往往可以通过找递推式的方法把他分解成子问题，再将子问题分解成孙问题。。。在有穷次分解后可以得到一个或几个拥有显而易见答案的简单 “后代问题”，程序将上述分解的方法再逆过来执行一遍就能够解决这样的复杂问题。与分而治之不同，动态规划在对问题分解时运用的是找递推式的思想，这意味着分解出的问题相似性很高以至于许多时候我们习惯于直接借助计算机分解问题。而计算机在接下来的步骤中有需要将这些问题逆向加和，因此，不妨在写代码时将这二者合并，最后呈现出的代码反而是先定义基元问题，通过递推式层层向上合成，最终到达一定限度，停止运算。</p>\n<p>​</p>\n<p>如果您感到困惑，我希望下面的题例能够帮助你：</p>\n<h3 id=\"noip2002-普及组-过河卒\"><a class=\"markdownIt-Anchor\" href=\"#noip2002-普及组-过河卒\">#</a> [NOIP2002 普及组] 过河卒</h3>\n<h4 id=\"题目描述\"><a class=\"markdownIt-Anchor\" href=\"#题目描述\">#</a> 题目描述</h4>\n<p>棋盘上 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span> 点有一个过河卒，需要走到目标 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span></span> 点。卒行走的规则：可以向下、或者向右。同时在棋盘上 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi></mrow><annotation encoding=\"application/x-tex\">C</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span></span></span></span> 点有一个对方的马，该马所在的点和所有跳跃一步可达的点称为对方马的控制点。因此称之为 “马拦过河卒”。</p>\n<p>棋盘用坐标表示，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span> 点 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>0</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(0, 0)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">0</span><span class=\"mclose\">)</span></span></span></span>、<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span></span> 点 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>n</mi><mo separator=\"true\">,</mo><mi>m</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(n, m)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">m</span><span class=\"mclose\">)</span></span></span></span>，同样马的位置坐标是需要给出的。</p>\n<p><img data-src=\"https://cdn.luogu.com.cn/upload/image_hosting/vg6k477j.png\" alt=\"\"></p>\n<p>现在要求你计算出卒从 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span> 点能够到达 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span></span> 点的路径的条数，假设马的位置是固定不动的，并不是卒走一步马走一步。</p>\n<h4 id=\"输入格式\"><a class=\"markdownIt-Anchor\" href=\"#输入格式\">#</a> 输入格式</h4>\n<p>一行四个正整数，分别表示 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span></span> 点坐标和马的坐标。</p>\n<h4 id=\"输出格式\"><a class=\"markdownIt-Anchor\" href=\"#输出格式\">#</a> 输出格式</h4>\n<p>一个整数，表示所有的路径条数。</p>\n<h4 id=\"样例-1\"><a class=\"markdownIt-Anchor\" href=\"#样例-1\">#</a> 样例 #1</h4>\n<p>样例输入 #1</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plaintext\">6 6 3 3<br></code></pre></td></tr></table></figure>\n<p>样例输出 #1</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs plaintext\">6<br></code></pre></td></tr></table></figure>\n<h4 id=\"提示\"><a class=\"markdownIt-Anchor\" href=\"#提示\">#</a> 提示</h4>\n<p>对于 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>100</mn><mi mathvariant=\"normal\">%</mi></mrow><annotation encoding=\"application/x-tex\">100 \\%</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.80556em;vertical-align:-0.05556em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">0</span><span class=\"mord\">%</span></span></span></span> 的数据，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>n</mi><mo separator=\"true\">,</mo><mi>m</mi><mo>≤</mo><mn>20</mn></mrow><annotation encoding=\"application/x-tex\">1 \\le n, m \\le 20</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.78041em;vertical-align:-0.13597em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8304100000000001em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">m</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">0</span></span></span></span>，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn><mo>≤</mo></mrow><annotation encoding=\"application/x-tex\">0 \\le</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.78041em;vertical-align:-0.13597em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≤</span></span></span></span> 马的坐标 <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>≤</mo><mn>20</mn></mrow><annotation encoding=\"application/x-tex\">\\le 20</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span><span class=\"mord\">0</span></span></span></span>。</p>\n<p><strong>【题目来源】</strong></p>\n<p>NOIP 2002 普及组第四题</p>\n<h4 id=\"分析\"><a class=\"markdownIt-Anchor\" href=\"#分析\">#</a> 分析</h4>\n<ol>\n<li>\n<p>这是一个经典的动态规划问题 —— 统计路径条数。我们可以直观的感受到，即使添加了只能向下或向右的限制，统计到达某一点所有路径的方案也并不容易，这是一个极为复杂的问题，并且随着你标点于原点的距离越来越远，工程将会越来越大。不过，如果将这个问题交给动态规划，事情瞬间就会变得清晰明了。</p>\n<ol>\n<li>对于某一点 (<em>i</em>,<em>j</em>)，设函数<em> f</em>(<em>i</em>,<em>j</em>) 为从原点到这一点的所有路径数，不难找到他的递推式之一即为:</li>\n<li>得到了这样的递推式后，我们自然想要将这样的递推式写在程序里。我们如何储存这样的递推式呢？或许你的第一反应是去想办法写出类似的递归函数，然后寻找某个边界值。这样的思路自然是最简单的，但也是最危险的。不妨设想一下，如果将 i 语 j 的数字设置的很大 —— 也许不需要很大，甚至二十几就足够让这样的函数无穷的递归中反反复复 —— 并且他们所计算的值甚至非常相似。</li>\n<li>事实上，通常的做法是，我们往往会使用一串数组去存储函数 f (i,j) 的所有因变量 —— 这取决于传入的 i 和 j 的大小。这样的好处是，当我们去使用递推式的时候，我们不用从新进行一次递归，而是取用已经递归出的结果。这样不仅占用空间较少，而且能让你的程序可运行。</li>\n<li>当然，使用数组定义的函数还存在许多问题。在这一题中，我们就必须为了保证不会出现 f (-1,0) 的情况将所有传入的坐标被迫加 1。</li>\n<li>最后，设置一个初始的基元，比如 f (0,1)=1，使用循环顺序遍历数组，将将函数值通过递推式计算后一一填入即可。</li>\n</ol>\n</li>\n<li>\n<p>在解决了路径统计之后，我们面临的问题就是：如何将马控制点去除？事实上，如果你很好的理解了上面的叙述，将马去除这件事再简单不过了：</p>\n<ol>\n<li>将马控制点去除，我们只需要让 f (xm,ym)=0，也就是说能够达到马控制点的路径一个都没有加到上述的递推式中即可。</li>\n<li>找出所有 xm 与 ym 也非常简单，因为你很容易就能发现这些点与给出的马的坐标的距离为定值。我们只需要在遍历数组是添加一个判断即可。</li>\n</ol>\n</li>\n</ol>\n<h4 id=\"参考代码\"><a class=\"markdownIt-Anchor\" href=\"#参考代码\">#</a> 参考代码</h4>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs c\"><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">include</span> <span class=\"hljs-string\">&lt;stdio.h&gt;</span></span><br><span class=\"hljs-meta\">#<span class=\"hljs-keyword\">define</span> ll long long</span><br>ll <span class=\"hljs-title function_\">lujingshu</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span>, <span class=\"hljs-type\">int</span>, <span class=\"hljs-type\">int</span>, <span class=\"hljs-type\">int</span>)</span>;<br><br><span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">()</span> <br>&#123;<br>\t<span class=\"hljs-type\">long</span> <span class=\"hljs-type\">long</span> result;<br>\t<span class=\"hljs-type\">int</span> bx, by, mx, my;<br>\t<span class=\"hljs-built_in\">scanf</span>(<span class=\"hljs-string\">&quot;%d%d%d%d&quot;</span>, &amp;bx, &amp;by, &amp;mx, &amp;my);<br>\tresult = lujingshu(bx, by, mx, my);<br>\t<span class=\"hljs-built_in\">printf</span>(<span class=\"hljs-string\">&quot;%lld&quot;</span>, result);<br>&#125;<br><br>ll <span class=\"hljs-title function_\">lujingshu</span><span class=\"hljs-params\">(<span class=\"hljs-type\">int</span> x, <span class=\"hljs-type\">int</span> y, <span class=\"hljs-type\">int</span> mx, <span class=\"hljs-type\">int</span> my)</span><br>&#123;<br>\tll r = <span class=\"hljs-number\">0</span>;<br>\tx++;<br>\ty++;<br>\tmx++;<br>\tmy++;<br>\tll f[<span class=\"hljs-number\">22</span>][<span class=\"hljs-number\">22</span>] = &#123;<span class=\"hljs-number\">0</span>&#125;;<br>\tf[<span class=\"hljs-number\">0</span>][<span class=\"hljs-number\">1</span>] = <span class=\"hljs-number\">1</span>;<br>\t<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> i = <span class=\"hljs-number\">1</span>; i &lt;= x; i++) <br>    &#123;<br>\t\t<span class=\"hljs-keyword\">for</span> (<span class=\"hljs-type\">int</span> j = <span class=\"hljs-number\">1</span>; j &lt;= y; j++) <br>        &#123;<br>\t\t\t<span class=\"hljs-keyword\">if</span> (((i - mx) * (i - mx) + (j - my) * (j - my) == <span class=\"hljs-number\">5</span> ) || (i == mx &amp;&amp; j == my)) &#123;<br>\t\t\t\tf[i][j] = <span class=\"hljs-number\">0</span>;<br>\t\t\t&#125;<br>            <span class=\"hljs-keyword\">else</span> <br>            &#123;<br>\t\t\t\tf[i][j] = f[i][j - <span class=\"hljs-number\">1</span>] + f[i - <span class=\"hljs-number\">1</span>][j];<br>\t\t\t&#125;<br>\t\t&#125;<br>\t&#125;<br>\tr = f[x][y];<br>\t<span class=\"hljs-keyword\">return</span> r;<br>&#125;<br><br></code></pre></td></tr></table></figure>\n<h2 id=\"\"><a class=\"markdownIt-Anchor\" href=\"#\">#</a> </h2>\n",
            "tags": []
        }
    ]
}